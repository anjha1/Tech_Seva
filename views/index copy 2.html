<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TechSeva - Connecting Bharat to Trusted Local Technicians</title>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Tailwind CSS (optional, if you want to use Tailwind classes directly, otherwise your custom CSS is detailed) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* Basic Reset & Body Styling */
         :root {
            --primary-blue: #007acc;
            --primary-teal: #00c2c7;
            --accent-gradient: linear-gradient(135deg, #007acc 0%, #00c2c7 100%);
            --light-gray: #f8f9fa;
            --medium-gray: #e9ecef;
            --dark-gray: #212529;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            --shadow-hover: 0 15px 40px rgba(0, 0, 0, 0.15);
            --border-radius: 16px;
            --border-radius-sm: 8px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            color: var(--dark-gray);
            line-height: 1.6;
            overflow-x: hidden;
            background-color: white;
        }

        h1, h2, h3, h4, h5 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
        }

        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background-color: rgba(255, 255, 255, 0.95);
            box-shadow: var(--shadow);
            position: fixed;
            width: 100%;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            transition: transform 0.3s;
        }

        .logo:hover {
            transform: scale(1.05);
        }

        .logo img {
            height: 45px;
            margin-right: 12px;
        }

        .logo h1 {
            color: var(--primary-blue);
            font-size: 28px;
            font-weight: 900;
            letter-spacing: -0.5px;
        }

        .logo span {
            color: var(--primary-teal);
        }

        .nav-links {
            display: flex;
            list-style: none;
        }

        .nav-links li {
            margin-left: 30px;
            position: relative;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--dark-gray);
            font-weight: 500;
            transition: color 0.3s;
            font-size: 16px;
            display: flex;
            align-items: center;
        }

        .nav-links a:hover {
            color: var(--primary-teal);
        }

        .nav-links a i {
            margin-right: 8px;
            font-size: 14px;
        }

        .mobile-menu {
            display: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--primary-blue);
        }

        /* Hero Section */
        .hero {
            color: white;
            padding: 180px 0 120px;
            position: relative;
            overflow: hidden;
            height: 0vh;
            min-height: 500px;
            display: flex;
            align-items: center;
        }

        .hero-video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -1;
        }

        .hero-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 122, 204, 0.7);
            background: linear-gradient(90deg, rgba(0, 122, 204, 0.8) 10%, rgba(0, 194, 199, 0.7) 100%);
           
        }

        .hero-content {
            position: relative;
            z-index: 1;
            max-width: 1000px;
            margin: 0 auto;
            text-align: center;
            padding: 0 20px;
        }

        .hero h1 {
            font-size: 4rem;
            margin-bottom: 20px;
            line-height: 1.2;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            animation: fadeInDown 1s ease;
        }

        .hero p {
            font-size: 1.5rem;
            margin-bottom: 40px;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            animation: fadeInUp 1s ease;
        }

        .cta-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 50px;
            flex-wrap: wrap;
            animation: fadeIn 1.5s ease;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 16px 32px;
            border-radius: var(--border-radius);
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            font-size: 16px;
            box-shadow: var(--shadow);
            border: none; /* Ensure buttons don't have default borders */
        }

        .btn i {
            margin-right: 10px;
        }

        .btn-primary {
            background: white;
            color: var(--primary-blue);
        }

        .btn-primary:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
            color: var(--primary-blue);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid white;
            backdrop-filter: blur(5px);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
        }

        .search-box {
            background: white;
            border-radius: var(--border-radius);
            padding: 10px;
            max-width: 700px;
            margin: 0 auto;
            display: flex;
            box-shadow: var(--shadow);
            animation: fadeInUp 1s ease;
            position: relative;
        }

        .search-box input {
            flex: 1;
            border: none;
            padding: 16px 20px;
            font-size: 16px;
            border-radius: var(--border-radius-sm) 0 0 var(--border-radius-sm);
            outline: none;
            font-family: 'Roboto', sans-serif;
        }

        .search-box button {
            background: var(--accent-gradient);
            color: white;
            border: none;
            padding: 16px 30px;
            border-radius: 0 var(--border-radius-sm) var(--border-radius-sm) 0;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            font-family: 'Roboto', sans-serif;
            display: flex;
            align-items: center;
        }

        .search-box button:hover {
            opacity: 0.9;
            transform: translateX(2px);
        }

        .search-box button i {
            margin-left: 8px;
        }

        .device-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            background: white;
            border-radius: 0 0 var(--border-radius) var(--border-radius);
            box-shadow: var(--shadow);
            z-index: 10;
            display: none;
            overflow: hidden;
        }

        .device-suggestions.active {
            display: block;
        }

        .device-suggestion {
            padding: 12px 20px;
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            align-items: center;
        }

        .device-suggestion:hover {
            background: var(--light-gray);
        }

        .device-suggestion i {
            margin-right: 12px;
            color: var(--primary-teal);
        }

        

        /* Services Section */
        .services {
            padding: 100px 0;
            background: var(--light-gray);
            position: relative;
            overflow: hidden;
        }

        .circuit-lines {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.05;
            z-index: 0;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,100 M100,0 L0,100" stroke="%23007acc" stroke-width="0.5" /></svg>');
        }

        .section-title {
            text-align: center;
            margin-bottom: 60px;
            position: relative;
            z-index: 1;
        }

        .section-title h2 {
            font-size: 2.8rem;
            color: var(--primary-blue);
            margin-bottom: 15px;
        }

        .section-title p {
            color: #666;
            max-width: 700px;
            margin: 0 auto;
            font-size: 1.1rem;
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            position: relative;
            z-index: 1;
        }

        .service-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 40px 30px;
            text-align: center;
            box-shadow: var(--shadow);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(0, 194, 199, 0.1);
        }

        .service-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--accent-gradient);
        }

        .service-card:hover {
            transform: translateY(-15px);
            box-shadow: var(--shadow-hover);
        }

        .service-icon {
            width: 100px;
            height: 100px;
            margin: 0 auto 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 194, 199, 0.1);
            border-radius: 50%;
            color: var(--primary-teal);
            font-size: 40px;
            transition: all 0.3s;
        }

        .service-card:hover .service-icon {
            transform: scale(1.1);
            background: var(--accent-gradient);
            color: white;
        }

        .service-card h3 {
            margin-bottom: 20px;
            color: var(--primary-blue);
            font-size: 1.5rem;
        }

        .service-card p {
            color: #666;
            margin-bottom: 25px;
            font-size: 1rem;
        }

        .service-card .btn {
            padding: 12px 25px;
            font-size: 15px;
        }

        /* Why Choose Us Section */
        .why-choose {
            padding: 100px 0;
            background: white;
            position: relative;
        }

        .floating-devices {
            position: absolute;
            width: 300px;
            height: 300px;
            right: 5%;
            top: 20%;
            z-index: 0;
            opacity: 0.1;
        }

        .benefits {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 30px;
            margin-top: 60px;
            position: relative;
            z-index: 1;
        }

        .benefit-item {
            text-align: center;
            padding: 40px 25px;
            border-radius: var(--border-radius);
            transition: all 0.4s;
            background: white;
            box-shadow: var(--shadow);
            border: 1px solid rgba(0, 122, 204, 0.1);
        }

        .benefit-item:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-hover);
        }

        .benefit-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--accent-gradient);
            border-radius: 50%;
            color: white;
            font-size: 30px;
            box-shadow: 0 10px 20px rgba(0, 194, 199, 0.3);
        }

        .benefit-item h3 {
            margin-bottom: 15px;
            color: var(--primary-blue);
            font-size: 1.3rem;
        }

        .benefit-item p {
            color: #666;
            font-size: 1rem;
        }

        /* Stats Section */
        .stats {
            padding: 80px 0;
            background: var(--accent-gradient);
            color: white;
            text-align: center;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
        }

        .stat-item h3 {
            font-size: 3.5rem;
            margin-bottom: 10px;
            font-weight: 900;
        }

        .stat-item p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        /* Join as Partner Section */
        .join-section {
            padding: 100px 0;
            background: url('https://images.unsplash.com/photo-1521791136064-7986c2920216?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2069&q=80') center/cover no-repeat;
            color: white;
            text-align: center;
            position: relative;
        }

        .join-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 122, 204, 0.85);
            z-index: 0;
        }

        .join-section .container {
            position: relative;
            z-index: 1;
        }

        .join-section h2 {
            margin-bottom: 20px;
            font-size: 2.8rem;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .join-section p {
            max-width: 700px;
            margin: 0 auto 40px;
            font-size: 1.2rem;
            text-shadow: 0 2px 3px rgba(0, 0, 0, 0.2);
        }

        .benefits-list {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 50px;
        }

        .benefit-tag {
            background: rgba(255, 255, 255, 0.2);
            padding: 12px 25px;
            border-radius: 50px;
            display: flex;
            align-items: center;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s;
        }

        .benefit-tag:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-3px);
        }

        .benefit-tag i {
            margin-right: 10px;
            font-size: 16px;
        }

        /* App Download Section */
        .app-section {
            padding: 100px 0;
            background: var(--light-gray);
        }

        .app-content {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 60px;
            margin-top: 50px;
        }

        .app-image {
            flex: 1;
            min-width: 300px;
            max-width: 450px;
            position: relative;
        }

        .app-image img {
            width: 100%;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            transition: transform 0.5s;
        }

        .app-image:hover img {
            transform: rotate(-5deg) scale(1.03);
        }

        .app-image::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border: 2px dashed var(--primary-teal);
            border-radius: var(--border-radius);
            top: 20px;
            left: 20px;
            z-index: -1;
            opacity: 0.5;
        }

        .app-details {
            flex: 1;
            min-width: 300px;
            max-width: 500px;
        }

        .app-details h3 {
            font-size: 2rem;
            color: var(--primary-blue);
            margin-bottom: 25px;
            line-height: 1.3;
        }

        .app-details p {
            margin-bottom: 30px;
            color: #666;
            font-size: 1.1rem;
            line-height: 1.7;
        }

        .app-features {
            margin-bottom: 30px;
        }

        .app-feature {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .app-feature i {
            width: 40px;
            height: 40px;
            background: rgba(0, 194, 199, 0.1);
            color: var(--primary-teal);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 16px;
        }

        .app-feature span {
            flex: 1;
        }

        .app-badges {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }

        .app-badge {
            height: 60px;
            transition: transform 0.3s;
            border-radius: var(--border-radius-sm);
            overflow: hidden;
        }

        .app-badge:hover {
            transform: scale(1.05);
        }

        .qr-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .qr-code {
            width: 120px;
            border-radius: var(--border-radius-sm);
            box-shadow: var(--shadow);
        }

        .qr-text {
            font-size: 14px;
            color: #666;
            max-width: 150px;
        }

        /* Testimonials Section */
        .testimonials {
            padding: 100px 0;
            background: white;
            position: relative;
        }

        .testimonial-slider {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
        }

        .testimonial-track {
            display: flex;
            gap: 30px;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
            padding: 20px 0;
            scrollbar-width: none;
        }

        .testimonial-track::-webkit-scrollbar {
            display: none;
        }

        .testimonial-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 40px;
            box-shadow: var(--shadow);
            min-width: 350px;
            scroll-snap-align: start;
            transition: all 0.3s;
            border: 1px solid rgba(0, 122, 204, 0.1);
            position: relative;
        }

        .testimonial-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-hover);
        }

        .testimonial-card::before {
            content: '"';
            position: absolute;
            top: 30px;
            left: 30px;
            font-size: 80px;
            color: rgba(0, 194, 199, 0.1);
            font-family: serif;
            line-height: 1;
        }

        .testimonial-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin: 0 auto 25px;
            overflow: hidden;
            border: 3px solid var(--primary-teal);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .testimonial-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .testimonial-text {
            font-style: italic;
            color: #666;
            margin-bottom: 30px;
            font-size: 1rem;
            line-height: 1.7;
            position: relative;
        }

        .testimonial-author {
            font-weight: 700;
            color: var(--primary-blue);
            font-size: 1.1rem;
        }

        .testimonial-role {
            color: #999;
            font-size: 14px;
            margin-top: 5px;
        }

        .slider-nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 40px;
        }

        .slider-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ddd;
            cursor: pointer;
            transition: all 0.3s;
        }

        .slider-dot.active {
            background: var(--primary-teal);
            transform: scale(1.2);
        }

        /* FAQ Section */
        .faq {
            padding: 100px 0;
            background: var(--light-gray);
        }

        .faq-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .faq-item {
            background: white;
            border-radius: var(--border-radius);
            margin-bottom: 15px;
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .faq-item:hover {
            box-shadow: var(--shadow-hover);
        }

        .faq-question {
            padding: 20px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            font-weight: 600;
            color: var(--primary-blue);
            transition: all 0.3s;
        }

        .faq-question:hover {
            background: rgba(0, 194, 199, 0.05);
        }

        .faq-question i {
            transition: transform 0.3s;
        }
        
        .faq-item.active .faq-question i {
            transform: rotate(180deg);
        }

        .faq-answer {
            padding: 0 25px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, padding 0.3s ease;
        }

        .faq-item.active .faq-answer {
            padding: 0 25px 25px;
            max-height: 500px; /* A large enough value to accommodate all answers */
        }
        
        /* City Coverage Section */
        .coverage {
            padding: 100px 0;
            background: white;
            text-align: center;
        }

        .city-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 40px;
        }

        .city-item {
            background: var(--light-gray);
            padding: 15px;
            border-radius: var(--border-radius-sm);
            transition: all 0.3s;
        }

        .city-item:hover {
            background: var(--primary-teal);
            color: white;
            transform: translateY(-5px);
        }

        /* Footer */
        footer {
            background: var(--dark-gray);
            color: white;
            padding: 80px 0 30px;
            position: relative;
        }

        .footer-wave {
            position: absolute;
            top: -100px;
            left: 0;
            width: 100%;
            height: 100px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none"><path d="M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z" opacity=".25" fill="%23ffffff"></path><path d="M0,0V15.81C13,36.92,27.64,56.86,47.69,72.05,99.41,111.27,165,111,224.58,91.58c31.15-10.15,60.09-26.07,89.67-39.8,40.92-19,84.73-46,130.83-49.67,36.26-2.85,70.9,9.42,98.6,31.56,31.77,25.39,62.32,62,103.63,73,40.44,10.79,81.35-6.69,119.13-24.28s75.16-39,116.92-43.05c59.73-5.85,113.28,22.88,168.9,38.84,30.2,8.66,59,6.17,87.09-7.5,22.43-10.89,48-26.93,60.65-49.24V0Z" opacity=".5" fill="%23ffffff"></path><path d="M0,0V5.63C149.93,59,314.09,71.32,475.83,42.57c43-7.64,84.23-20.12,127.61-26.46,59-8.63,112.48,12.24,165.56,35.4C827.93,77.22,886,95.24,951.2,90c86.53-7,172.46-45.71,248.8-84.81V0Z" fill="%23ffffff"></path></svg>') no-repeat;
            background-size: cover;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 40px;
            margin-bottom: 50px;
            position: relative;
            z-index: 1;
        }

        .footer-column h3 {
            color: white;
            margin-bottom: 25px;
            font-size: 1.2rem;
            position: relative;
            padding-bottom: 10px;
        }

        .footer-column h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 3px;
            background: var(--primary-teal);
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 12px;
        }

        .footer-links a {
            color: #ccc;
            text-decoration: none;
            transition: all 0.3s;
            display: flex;
            align-items: center;
        }

        .footer-links a:hover {
            color: var(--primary-teal);
            transform: translateX(5px);
        }

        .footer-links a i {
            margin-right: 10px;
            font-size: 12px;
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }

        .social-links a {
            color: white;
            background: rgba(255, 255, 255, 0.1);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .social-links a:hover {
            background: var(--primary-teal);
            transform: translateY(-5px);
        }

        .newsletter {
            margin-top: 25px;
        }

        .newsletter p {
            margin-bottom: 15px;
            color: #aaa;
        }

        .newsletter-form {
            display: flex;
        }

        .newsletter-form input {
            flex: 1;
            padding: 12px 15px;
            border: none;
            border-radius: var(--border-radius-sm) 0 0 var(--border-radius-sm);
            font-family: 'Roboto', sans-serif;
            outline: none;
        }

        .newsletter-form button {
            background: var(--primary-teal);
            color: white;
            border: none;
            padding: 0 20px;
            border-radius: 0 var(--border-radius-sm) var(--border-radius-sm) 0;
            cursor: pointer;
            transition: background 0.3s;
        }

        .newsletter-form button:hover {
            background: var(--primary-blue);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #999;
            font-size: 14px;
            position: relative;
            z-index: 1;
        }

        .payment-methods {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .payment-method {
            height: 25px;
            filter: grayscale(100%) brightness(2);
            opacity: 0.7;
            transition: all 0.3s;
        }

        .payment-method:hover {
            filter: none;
            opacity: 1;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
            100% { transform: translateY(0px); }
        }

        .floating {
            animation: float 6s ease-in-out infinite;
        }

        /* Responsive Styles */
        @media (max-width: 1200px) {
            .hero h1 {
                font-size: 3.5rem;
            }
            
            .model-container {
                display: none;
            }
        }

        @media (max-width: 992px) {
            .hero {
                min-height: 600px;
            }
            
            .hero h1 {
                font-size: 3rem;
            }
            
            .hero p {
                font-size: 1.3rem;
            }
            
            .section-title h2 {
                font-size: 2.5rem;
            }
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
                flex-direction: column;
                position: absolute;
                top: 75px; /* Adjust based on header height */
                left: 0;
                width: 100%;
                background-color: rgba(255, 255, 255, 0.98);
                box-shadow: var(--shadow);
                padding: 20px 0;
                border-top: 1px solid var(--light-gray);
            }
            .nav-links.active {
                display: flex;
            }
            .nav-links li {
                margin: 10px 20px;
            }
            .nav-links a {
                padding: 10px 15px;
                border-radius: var(--border-radius-sm);
            }
            
            .mobile-menu {
                display: block;
            }
            
            .hero {
                padding: 150px 0 80px;
                min-height: 500px;
            }
            
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .hero p {
                font-size: 1.1rem;
            }
            
            .btn {
                padding: 14px 25px;
            }
            
            .service-card {
                padding: 30px 20px;
            }
            
            .app-content {
                flex-direction: column;
                text-align: center;
            }
            
            .app-details {
                text-align: center;
            }
            
            .qr-container {
                justify-content: center;
            }
        }

        @media (max-width: 576px) {
            .hero h1 {
                font-size: 2rem;
            }
            
            .cta-buttons {
                flex-direction: column;
                gap: 15px;
            }
            
            .btn {
                width: 100%;
            }
            
            .search-box {
                flex-direction: column;
            }
            
            .search-box input {
                border-radius: var(--border-radius-sm);
                margin-bottom: 10px;
            }
            
            .search-box button {
                border-radius: var(--border-radius-sm);
                width: 100%;
            }
            
            .section-title h2 {
                font-size: 2rem;
            }
            
            .testimonial-card {
                min-width: 280px;
                padding: 30px;
            }
        }

        /* --- Auth Modal Specific Styles from index1.html --- */
        .auth-overlay {
            display: none; /* Hidden by default */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7); /* Darker overlay */
            z-index: 10001; /* Higher than other elements */
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            animation: fadeInOverlay 0.3s ease-out;
        }
        @keyframes fadeInOverlay {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .auth-container {
            background: white;
            padding: 2.5rem; /* Increased padding */
            border-radius: 1rem; /* More rounded */
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4); /* More prominent shadow */
            max-width: 500px; /* Wider modal */
            width: 90%; /* Responsive width for smaller screens */
            position: relative;
            text-align: left;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideInDown 0.5s ease-out;
        }
        @keyframes slideInDown {
            from { opacity: 0; transform: translateY(-50px); }
            to { transform: translateY(0); opacity: 1; }
        }

        .close-auth-modal {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 2rem; /* Larger close button */
            cursor: pointer;
            color: #777;
            transition: color 0.3s ease, transform 0.2s ease;
        }
        .close-auth-modal:hover {
            color: #333;
            transform: rotate(90deg);
        }

        .auth-header-modal {
            text-align: center;
            margin-bottom: 2rem;
        }

        .auth-header-modal h1 {
            color: var(--primary-blue); /* Using primary-blue from index.html */
            font-size: 2rem; /* Larger heading */
            margin-bottom: 0.5rem;
            font-weight: 700;
        }
        .auth-header-modal p {
            color: #666;
            font-size: 1.05rem;
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 2rem;
            border-bottom: 2px solid #eee; /* Thicker border */
        }
        .tab-btn {
            flex: 1;
            padding: 1rem; /* Larger tabs */
            background: none;
            border: none;
            font-size: 1.1rem;
            font-weight: 600;
            color: #7f8c8d;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            outline: none;
        }

        .tab-btn.active {
            color: var(--primary-blue); /* Using primary-blue */
            border-color: var(--primary-blue);
        }

        .role-selection {
            margin-bottom: 2rem;
            text-align: center;
        }

        .role-selection label {
            font-weight: bold;
            margin-bottom: 1rem;
            display: block;
            color: #555;
            font-size: 1.05rem;
        }

        .role-options {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .role-btn {
            background-color: var(--light-gray); /* Light background for buttons */
            border: 2px solid var(--medium-gray);
            padding: 0.8rem 1.5rem;
            border-radius: 0.8rem; /* More rounded */
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #555;
            outline: none;
        }

        .role-btn:hover {
            border-color: var(--primary-blue);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .role-btn.active {
            background-color: rgba(0, 122, 204, 0.1); /* Light blue tint */
            border-color: var(--primary-blue);
            color: var(--primary-blue);
            box-shadow: 0 0 10px rgba(0, 122, 204, 0.4);
        }

        .role-btn i {
            font-size: 1.2em;
        }
        .auth-form {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .auth-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 1.2rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.6rem;
            font-weight: 600;
            color: #333;
        }

        .form-group input[type="email"],
        .form-group input[type="password"],
        .form-group input[type="text"],
        .form-group input[type="tel"],
        .form-group select,
        .form-group textarea { /* Added textarea for consistency */
            width: 100%;
            padding: 0.8rem 1rem;
            border: 1px solid #ccc;
            border-radius: 0.5rem;
            font-size: 1rem;
            box-sizing: border-box;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 4px rgba(0, 122, 204, 0.2);
            outline: none;
        }

        .password-input {
            position: relative;
        }

        .password-input input {
            padding-right: 2.8rem; /* Space for eye icon */
        }

        .toggle-password, .toggle-confirm-password {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            color: #7f8c8d;
            font-size: 1.1rem;
            transition: color 0.3s ease;
        }
        .toggle-password:hover, .toggle-confirm-password:hover {
            color: #333;
        }

        .auth-btn {
            width: 100%;
            padding: 1rem;
            background: var(--primary-blue);
            color: white;
            border: none;
            border-radius: 0.5rem;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            margin-top: 1.5rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .auth-btn:hover {
            background: #0066a3; /* Slightly darker blue */
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }

        .auth-btn:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            opacity: 0.7;
            transform: none;
            box-shadow: none;
        }

        .auth-footer {
            margin-top: 1.5rem;
            text-align: center;
        }

        .forgot-password {
            color: var(--primary-blue);
            text-decoration: none;
            font-size: 0.95rem;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        .forgot-password:hover {
            color: #0066a3;
            text-decoration: underline;
        }

        /* OTP Modal Styles */
        .otp-modal, .forgot-password-modal { /* Combined styles for both OTP modals */
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 10002; /* Higher than auth-overlay */
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            animation: fadeInOverlay 0.3s ease-out;
        }

        .otp-modal .modal-content, .forgot-password-modal .modal-content {
            background: white;
            padding: 2.5rem;
            border-radius: 1rem;
            max-width: 450px;
            width: 90%;
            position: relative;
            text-align: center;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4);
            max-height: 90vh;
            overflow-y: auto;
            animation: slideInDown 0.5s ease-out;
        }

        .close-otp-modal, .close-forgot-password-modal {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 2rem;
            cursor: pointer;
            color: #777;
            transition: color 0.3s ease, transform 0.2s ease;
        }
        .close-otp-modal:hover, .close-forgot-password-modal:hover {
            color: #333;
            transform: rotate(90deg);
        }

        .otp-input {
            display: flex;
            justify-content: space-between;
            margin: 2rem auto;
            gap: 0.5rem; /* Space between OTP digits */
            max-width: 300px; /* Limit width for OTP inputs */
        }

        .otp-digit {
            width: 45px; /* Fixed width for OTP boxes */
            height: 50px; /* Taller */
            text-align: center;
            font-size: 1.8rem; /* Larger font */
            border: 1px solid #ccc;
            border-radius: 0.5rem;
            box-sizing: border-box;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
        .otp-digit:focus {
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 4px rgba(0, 122, 204, 0.2);
            outline: none;
        }

        .resend-otp {
            margin-top: 1rem;
            font-size: 0.95rem;
            color: #7f8c8d;
        }

        .resend-otp a {
            color: var(--primary-blue);
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s ease;
        }
        .resend-otp a:hover {
            color: #0066a3;
            text-decoration: underline;
        }

        /* Message Box */
       

        
        .message-box.success {
            background-color: #d4edda;
            color: #155724;
            border-color: #c3e6cb;
        }
        .message-box.error {
            background-color: #f8d7da;
            color: #721c24;
            border-color: #f5c6cb;
        }
        .message-box.info {
            background-color: #d1ecf1;
            color: #0c5460;
            border-color: #bee5eb;
        }

        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        /* Technician Specific Fields */
        #technician-fields {
            display: none; /* Hidden by default */
        }
        #technician-fields input {
            margin-bottom: 1rem;
        }

        /* Booking Form Specifics - Enhanced Grid Layout for Alignment */
        .booking-section {
            padding: 3rem 1.5rem;
            text-align: left;
            /* Enhanced Graphic Card Design */
            background: linear-gradient(145deg, #eaf2f8 0%, #dbe9f5 100%); /* Blue gradient background */
            border-radius: 1.5rem; /* More rounded corners for the card */
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15), inset 0 0 15px rgba(255, 255, 255, 0.5); /* Stronger outer shadow, subtle inner glow */
            border: 2px solid #c1dff0; /* A soft border */
            position: relative; /* For decorative elements */
            overflow: hidden;
            margin-bottom: 2rem; /* Added margin for section separation */
        }
        .booking-section::before {
            content: '';
            position: absolute;
            top: -20px;
            left: -20px;
            width: 80px;
            height: 80px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            filter: blur(10px);
            animation: floatCircle 6s infinite ease-in-out;
        }
        .booking-section::after {
            content: '';
            position: absolute;
            bottom: -30px;
            right: -30px;
            width: 100px;
            height: 100px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 50%;
            filter: blur(15px);
            animation: floatCircle 8s infinite reverse ease-in-out;
        }

        @keyframes floatCircle {
            0% { transform: translate(0, 0); }
            50% { transform: translate(20px, 30px); }
            100% { transform: translate(0, 0); }
        }

        .booking-section h2 {
            text-align: center;
            color: var(--primary-blue); /* Darker heading for contrast */
            margin-bottom: 2rem;
        }
        .booking-form-grid {
            display: grid;
            grid-template-columns: 1fr; /* Default to single column */
            gap: 1.5rem; /* Spacing between form groups */
            max-width: 700px; /* Max width for the form itself */
            margin: 0 auto;
        }
        @media (min-width: 768px) {
            .booking-form-grid {
                grid-template-columns: repeat(2, 1fr); /* Two columns on larger screens */
            }
            .booking-form-grid .form-group:nth-child(3), /* Preferred Date & Time */
            .booking-form-grid .form-group:nth-child(4) { /* Additional Notes */
                grid-column: span 2; /* Span full width on 2-column layout */
            }
        }

        .form-group label {
            display: block;
            margin-bottom: 0.6rem;
            font-weight: bold;
            color: #444;
            font-size: 1em;
        }
        input[type="text"],
        input[type="datetime-local"],
        textarea,
        select {
            width: 100%; /* Full width within its grid column */
            padding: 0.8rem 1rem;
            border: 1px solid #cce0f0; /* Lighter border */
            border-radius: 0.5rem;
            font-size: 1em;
            box-sizing: border-box;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            background-color: white;
        }
        input[type="text"]:focus,
        input[type="datetime-local"]:focus,
        textarea:focus,
        select:focus {
            border-color: var(--primary-blue);
            outline: none;
            box-shadow: 0 0 0 4px rgba(0, 122, 204, 0.2); /* More prominent focus shadow */
        }
        textarea {
            resize: vertical;
            min-height: 100px; /* Slightly taller textarea */
        }
        .btn-form-submit {
            width: 100%;
            padding: 1rem 2rem; /* Larger submit button */
            border-radius: 0.5rem;
            font-size: 1.1em;
            margin-top: 1.5rem;
            grid-column: span 1; /* Default to 1 column */
        }
        @media (min-width: 768px) {
            .btn-form-submit {
                grid-column: span 2; /* Span full width on 2-column layout */
            }
        }
        /* Force parent form content to center */
        /* Updated CSS to center the Google Sign-in button */
        .auth-form .auth-footer {
            display: flex;
            flex-direction: column;
            align-items: center;  /* This centers items horizontally within the flex container */
            justify-content: center;
        }

        /* This ensures the GSI button wrapper (and thus the button itself) is centered */
        #g_id_signin_wrapper {
            display: flex;
            justify-content: center; /* Center the content inside the wrapper */
            width: 100%; /* Take full width of parent */
            max-width: 450px; /* Limit max width on larger screens */
            margin: 1.5rem auto 0 auto; /* Center the wrapper itself using auto margins */
        }

        /* Specific styling for the actual GSI button rendered by Google's JS */
        .g_id_signin {
            /* Google's JS renders an iframe or div with this class. */
            /* We can try to influence its size but direct control is limited. */
            width: 100% !important; /* Force to fill its container, important to override Google's inline styles */
            max-width: 450px; /* Ensures the button does not exceed a reasonable max width */
        }
        /* AI Diagnosis Section */
        .ai-diagnosis-section {
            background-color: var(--light-gray); /* Lighter blue background */
            padding: 4rem 1.5rem;
            margin-bottom: 2rem;
            border-radius: 1rem;
            box-shadow: var(--shadow);
            text-align: center;
        }
        .ai-diagnosis-section h2 {
            color: var(--primary-blue); /* Blue for the AI section header */
            margin-bottom: 1.5rem;
        }
        .ai-diagnosis-section p {
            font-size: 1.1em;
            color: #666;
            margin-bottom: 2rem;
        }
        .ai-diagnosis-section .form-group {
            max-width: 600px;
            margin: 0 auto 1.5rem auto;
            text-align: left;
        }
        .ai-diagnosis-section label {
            display: block;
            margin-bottom: 0.8rem;
            font-weight: bold;
            color: #444;
            font-size: 1.05em;
        }
        .ai-diagnosis-section textarea {
            width: 100%;
            min-height: 150px; /* Taller textarea */
            padding: 1rem;
            border: 1px solid #c0e0f0;
            border-radius: 0.5rem;
            font-size: 1em;
            box-sizing: border-box;
            resize: vertical;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            background-color: white;
        }
        .ai-diagnosis-section textarea:focus {
            border-color: var(--primary-blue);
            outline: none;
            box-shadow: 0 0 0 4px rgba(0, 122, 204, 0.2);
        }
        .diagnosis-result {
            margin-top: 2rem;
            background-color: #e8f9f8; /* Very light green/blue */
            padding: 1.5rem;
            border-radius: 0.8rem;
            text-align: left;
            min-height: 80px; /* Ensure some height for display */
            box-shadow: inset 0 0 10px rgba(0,0,0,0.05);
            border: 1px solid #c1e0e8;
            color: #2c3e50;
            font-size: 1em;
            line-height: 1.6;
            white-space: pre-wrap; /* Preserve whitespace and breaks */
            animation: slideInUp 0.6s ease-out forwards; /* Animation for result */
        }
        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        #loading-indicator {
            text-align: center;
            font-style: italic;
            color: var(--primary-blue);
            display: none;
            margin-top: 1rem;
        }

        /* User Types CTA Section */
        .user-types-cta-section {
            padding: 100px 0;
            background: white;
        }
        .user-cta-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); /* Larger min-width */
            gap: 2rem;
            margin-top: 2.5rem;
        }

        .user-cta-card {
            background-color: #ffffff;
            padding: 2.5rem;
            border-radius: 1rem;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            text-decoration: none; /* For link */
            color: #333;
            border: 1px solid #eee;
            text-align: center; /* Center content within card */
        }

        .user-cta-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.2);
        }

        .user-cta-card h3 {
            font-size: 1.8em; /* Slightly smaller to fit better */
            margin-top: 0;
            margin-bottom: 1rem;
            color: var(--dark-gray);
            display: flex;
            align-items: center;
            justify-content: center; /* Center icon and text */
            gap: 0.8rem;
            font-weight: 700;
        }

        .user-icon {
            font-size: 1.5em; /* Adjusted icon size */
            color: var(--primary-blue);
        }
        /* Specific colors for CTA cards */
        .user-cta-card.customer h3 .user-icon { color: #28a745; } /* Green for customer */
        .user-cta-card.technician h3 .user-icon { color: #ffc107; } /* Orange for technician */
        .user-cta-card.admin h3 .user-icon { color: #dc3545; } /* Red for admin */
        .user-cta-card .btn {
            padding: 0.8rem 2rem; /* Slightly smaller buttons within cards */
            font-size: 1em;
            margin-top: 1.5rem;
        }

        /* Multilingual Support Banner */
        .multilingual-banner {
            background: linear-gradient(90deg, var(--primary-blue) 0%, #0066a3 100%); /* Blue gradient */
            color: white;
            padding: 3rem 1.5rem;
            border-radius: 1rem;
            box-shadow: var(--shadow);
            text-align: center;
            margin-bottom: 2rem;
        }
        .multilingual-banner h2 {
            color: white;
            margin-bottom: 1rem;
        }
        .multilingual-banner p {
            color: #e0f2f7; /* Lighter white */
            font-size: 1.1em;
        }
        .language-dropdown-placeholder {
            background-color: white;
            color: #333;
            padding: 0.8rem 1.2rem;
            border-radius: 0.5rem;
            margin-top: 1.5rem;
            display: inline-block;
            font-weight: 500;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .language-dropdown-placeholder:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }
        
        /* Testimonials Section (from index.html, adjusted for consistency) */
        .testimonials-grid { /* Renamed from testimonial-slider for consistency with other grids */
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-top: 2.5rem;
        }
        .testimonial-card {
            background-color: #f0f8ff; /* Very light blue */
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            text-align: left;
            border-left: 6px solid var(--primary-blue); /* Thicker border */
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .testimonial-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }
        .testimonial-text {
            font-style: italic;
            margin-bottom: 1rem;
            color: #555;
            font-size: 1em;
        }
        .testimonial-author {
            font-weight: bold;
            color: var(--dark-gray);
            margin-bottom: 0.5rem;
        }
        .testimonial-rating {
            color: #f1c40f; /* Yellow stars */
            font-size: 1.2em; /* Slightly larger stars */
            margin-top: 0.5rem;
        }

        /* Responsive adjustments for auth modals */
        @media (max-width: 768px) {
            .auth-container, .otp-modal .modal-content, .forgot-password-modal .modal-content {
                margin: 1rem;
                padding: 1.5rem;
                width: 95%; /* Adjust width for smaller screens */
                max-width: 95%; /* Ensure no overflow on very small screens */
            }

            .auth-header-modal h1 {
                font-size: 1.8rem;
            }

            .tab-btn {
                font-size: 0.95rem;
                padding: 0.8rem;
            }

            .role-options {
                flex-direction: column;
                gap: 0.8rem;
            }

            .role-btn {
                min-width: unset;
                width: 100%;
            }

            .otp-digit {
                width: 40px;
                height: 45px;
                font-size: 1.5rem;
            }

            /* message box responsive */
           
        }
        body {
            margin: 0;
            font-family: 'Inter', sans-serif; /* Changed font to Inter for modern look */
            background-color: #f0f2f5; /* Lighter, subtle background */
            color: #333;
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            overflow-x: hidden; /* Prevent horizontal scroll */
        }

        /* Header / Navbar */
        header {
            background-color: #2c3e50; /* Dark blue/grey */
            color: white;
            padding: 1rem 1.5rem; /* Increased padding */
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15); /* More prominent shadow */
            position: sticky;
            top: 0;
            z-index: 1000;
            flex-wrap: wrap; /* Allow wrapping for mobile */
        }

        .logo {
            font-size: 2em; /* Slightly larger logo */
            font-weight: 800; /* Bolder font */
            text-decoration: none;
            color: white;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: transform 0.3s ease;
        }
        .logo:hover {
            transform: scale(1.05);
        }

        .nav-menu {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            gap: 1.5rem; /* Spacing between nav items */
        }

        .nav-item a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            padding: 0.6rem 1rem;
            border-radius: 0.5rem; /* Rounded corners */
            transition: background-color 0.3s ease, transform 0.2s ease;
            position: relative; /* For underline effect */
            overflow: hidden; /* For underline animation */
        }

        .nav-item a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px; /* Underline thickness */
            background-color: #3498db; /* Blue underline */
            transform: scaleX(0); /* Start hidden, scale to show */
            transform-origin: bottom left; /* Scale from left */
            transition: transform 0.3s ease-out;
        }

        .nav-item a:hover::after {
            transform: scaleX(1); /* Show on hover */
        }


        .nav-item a:hover, .nav-item a.active {
            background-color: #34495e; /* Slightly lighter blue/grey on hover */
            transform: translateY(-2px); /* Slight lift on hover */
        }

        /* Hamburger menu (for mobile) */
        .menu-toggle {
            display: none; /* Hidden on desktop */
            background: none;
            border: none;
            color: white;
            font-size: 2em;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        .menu-toggle:hover {
            transform: scale(1.1);
        }

        /* Main Content Container */
        main {
            flex: 1; /* Allows main content to grow and push footer down */
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Section Styling */
        section {
            padding: 4rem 1.5rem; /* Increased padding */
            text-align: center;
            background-color: white;
            margin-bottom: 2rem; /* Increased margin */
            border-radius: 1rem; /* More rounded corners */
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08); /* Softer, larger shadow */
            animation: fadeIn 1s ease-out; /* Fade-in animation */
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        section:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.12);
        }

        section:nth-child(even) {
            background-color: #f8f9fa; /* Alternate background for sections */
        }

        h1, h2, h3 {
            color: #2c3e50;
            margin-bottom: 1.5rem;
        }

        h1 {
            font-size: 3.2em; /* Larger heading */
            line-height: 1.2;
            font-weight: 800;
        }

        h2 {
            font-size: 2.6em; /* Larger subheading */
            margin-bottom: 2rem;
            font-weight: 700;
            color: #3498db; /* Main accent color for headings */
        }

        p {
            font-size: 1.15em; /* Slightly larger text */
            color: #555;
            margin-bottom: 1.5rem;
        }

        /* Buttons */
        .btn {
            display: inline-block;
            background-color: #3498db; /* Blue */
            color: white;
            padding: 1rem 2.5rem; /* Larger padding */
            text-decoration: none;
            border-radius: 2rem; /* More rounded corners */
            font-size: 1.2em; /* Larger font */
            font-weight: bold;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            border: none;
            cursor: pointer;
            margin: 0.8rem; /* Consistent margin */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .btn-green {
            background-color: #27ae60; /* Green */
        }

        .btn:hover {
            transform: translateY(-5px); /* More pronounced lift effect */
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.25);
        }
        .btn-green:hover {
            background-color: #229a53;
        }
        .btn-secondary {
            background-color: #6c757d;
        }
        .btn-secondary:hover {
            background-color: #5a6268;
        }

        /* Booking Form Specifics - Enhanced Grid Layout for Alignment */
        .booking-section {
            padding: 3rem 1.5rem;
            text-align: left;
            /* Enhanced Graphic Card Design */
            background: linear-gradient(145deg, #eaf2f8 0%, #dbe9f5 100%); /* Blue gradient background */
            border-radius: 1.5rem; /* More rounded corners for the card */
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15), inset 0 0 15px rgba(255, 255, 255, 0.5); /* Stronger outer shadow, subtle inner glow */
            border: 2px solid #c1dff0; /* A soft border */
            position: relative; /* For decorative elements */
            overflow: hidden;
        }
        .booking-section::before {
            content: '';
            position: absolute;
            top: -20px;
            left: -20px;
            width: 80px;
            height: 80px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            filter: blur(10px);
            animation: floatCircle 6s infinite ease-in-out;
        }
        .booking-section::after {
            content: '';
            position: absolute;
            bottom: -30px;
            right: -30px;
            width: 100px;
            height: 100px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 50%;
            filter: blur(15px);
            animation: floatCircle 8s infinite reverse ease-in-out;
        }

        @keyframes floatCircle {
            0% { transform: translate(0, 0); }
            50% { transform: translate(20px, 30px); }
            100% { transform: translate(0, 0); }
        }

        .booking-section h2 {
            text-align: center;
            color: #2c3e50; /* Darker heading for contrast */
            margin-bottom: 2rem;
        }
        .booking-form-grid {
            display: grid;
            grid-template-columns: 1fr; /* Default to single column */
            gap: 1.5rem; /* Spacing between form groups */
            max-width: 700px; /* Max width for the form itself */
            margin: 0 auto;
        }
        @media (min-width: 768px) {
            .booking-form-grid {
                grid-template-columns: repeat(2, 1fr); /* Two columns on larger screens */
            }
            .booking-form-grid .form-group:nth-child(3), /* Preferred Date & Time */
            .booking-form-grid .form-group:nth-child(4) { /* Additional Notes */
                grid-column: span 2; /* Span full width on 2-column layout */
            }
        }

        .form-group label {
            display: block;
            margin-bottom: 0.6rem;
            font-weight: bold;
            color: #444;
            font-size: 1em;
        }
        input[type="text"],
        input[type="datetime-local"],
        textarea,
        select {
            width: 100%; /* Full width within its grid column */
            padding: 0.8rem 1rem;
            border: 1px solid #cce0f0; /* Lighter border */
            border-radius: 0.5rem;
            font-size: 1em;
            box-sizing: border-box;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            background-color: white;
        }
        input[type="text"]:focus,
        input[type="datetime-local"]:focus,
        textarea:focus,
        select:focus {
            border-color: #3498db;
            outline: none;
            box-shadow: 0 0 0 4px rgba(52, 152, 219, 0.2); /* More prominent focus shadow */
        }
        textarea {
            resize: vertical;
            min-height: 100px; /* Slightly taller textarea */
        }
        .btn-form-submit {
            width: 100%;
            padding: 1rem 2rem; /* Larger submit button */
            border-radius: 0.5rem;
            font-size: 1.1em;
            margin-top: 1.5rem;
            grid-column: span 1; /* Default to 1 column */
        }
        @media (min-width: 768px) {
            .btn-form-submit {
                grid-column: span 2; /* Span full width on 2-column layout */
            }
        }
        /* Force parent form content to center */
        /* Updated CSS to center the Google Sign-in button */
        .auth-form .auth-footer {
            display: flex;
            flex-direction: column;
            align-items: center;  /* This centers items horizontally within the flex container */
            justify-content: center;
        }

        /* This ensures the GSI button wrapper (and thus the button itself) is centered */
        #g_id_signin_wrapper {
            display: flex;
            justify-content: center; /* Center the content inside the wrapper */
            width: 100%; /* Take full width of parent */
            max-width: 450px; /* Limit max width on larger screens */
            margin: 1.5rem auto 0 auto; /* Center the wrapper itself using auto margins */
        }

        /* Specific styling for the actual GSI button rendered by Google's JS */
        .g_id_signin {
            /* Google's JS renders an iframe or div with this class. */
            /* We can try to influence its size but direct control is limited. */
            width: 100% !important; /* Force to fill its container, important to override Google's inline styles */
            max-width: 450px; /* Ensures the button does not exceed a reasonable max width */
        }


        /* Hero Section Specifics */
        .hero-section {
            padding: 6rem 1.5rem; /* Increased padding */
            background: linear-gradient(135deg, #eaf2f8 0%, #dbe9f5 100%); /* Subtle gradient */
            overflow: hidden; /* For animations */
        }

        .hero-image-placeholder {
            width: 100%;
            max-width: 450px; /* Slightly larger */
            height: 280px;
            background: linear-gradient(45deg, #c1dff0 0%, #a7cfe8 100%); /* Blue gradient for placeholder */
            margin: 2.5rem auto 0;
            border-radius: 1.5rem; /* More rounded */
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 4.5em; /* Larger icon */
            color: #6a9ed4;
            box-shadow: inset 0 0 15px rgba(0,0,0,0.1);
            position: relative; /* For pseudo-elements */
            overflow: hidden;
        }
        .hero-image-placeholder::before, .hero-image-placeholder::after {
            content: '';
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: pulse 4s infinite ease-in-out;
        }
        .hero-image-placeholder::before {
            width: 80%;
            height: 80%;
            top: -20%;
            left: -20%;
        }
        .hero-image-placeholder::after {
            width: 60%;
            height: 60%;
            bottom: -15%;
            right: -15%;
            animation-delay: 1s;
        }
        @keyframes pulse {
            0% { transform: scale(0.8); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 0.8; }
            100% { transform: scale(0.8); opacity: 0.5; }
        }


        /* Features Section */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Slightly larger min-width */
            gap: 2rem;
            margin-top: 2.5rem;
        }

        .feature-item {
            background-color: #f8faff; /* Very light blue */
            padding: 2rem;
            border-radius: 1rem;
            text-align: left;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            transition: background-color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid #e0f0ff;
        }
        .feature-item:hover {
            background-color: #eaf4ff;
            transform: translateY(-8px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .feature-item h3 {
            font-size: 1.4em;
            margin-top: 0;
            color: #2c3e50; /* Darker heading */
            display: flex;
            align-items: center;
            gap: 0.8rem;
            font-weight: 600;
        }
        .feature-icon {
            font-size: 1.3em;
            color: #3498db;
        }
        .feature-item p {
            font-size: 1em;
            color: #666;
            margin-bottom: 0; /* Remove bottom margin if last element */
        }

        /* User Types CTA Section */
        .user-cta-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); /* Larger min-width */
            gap: 2rem;
            margin-top: 2.5rem;
        }

        .user-cta-card {
            background-color: #ffffff;
            padding: 2.5rem;
            border-radius: 1rem;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            text-decoration: none; /* For link */
            color: #333;
            border: 1px solid #eee;
        }

        .user-cta-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.2);
        }

        .user-cta-card h3 {
            font-size: 2em; /* Larger icon */
            margin-top: 0;
            margin-bottom: 1rem;
            color: #34495e;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.8rem;
            font-weight: 700;
        }

        .user-icon {
            font-size: 1.8em;
            color: #3498db;
        }
        /* Specific colors for CTA cards */
        .user-cta-card.customer h3 .user-icon { color: #28a745; } /* Green for customer */
        .user-cta-card.technician h3 .user-icon { color: #ffc107; } /* Orange for technician */
        .user-cta-card.admin h3 .user-icon { color: #dc3545; } /* Red for admin */
        .user-cta-card .btn {
            padding: 0.8rem 2rem; /* Slightly smaller buttons within cards */
            font-size: 1em;
            margin-top: 1.5rem;
        }


        /* Multilingual Support Banner */
        .multilingual-banner {
            background: linear-gradient(90deg, #3498db 0%, #2980b9 100%); /* Blue gradient */
            color: white;
            padding: 3rem 1.5rem;
            border-radius: 1rem;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }
        .multilingual-banner h2 {
            color: white;
            margin-bottom: 1rem;
        }
        .multilingual-banner p {
            color: #e0f2f7; /* Lighter white */
            font-size: 1.1em;
        }
        .language-dropdown-placeholder {
            background-color: white;
            color: #333;
            padding: 0.8rem 1.2rem;
            border-radius: 0.5rem;
            margin-top: 1.5rem;
            display: inline-block;
            font-weight: 500;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .language-dropdown-placeholder:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }

        /* Testimonials Section */
        .testimonials-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-top: 2.5rem;
        }
        .testimonial-card {
            background-color: #f0f8ff; /* Very light blue */
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            text-align: left;
            border-left: 6px solid #3498db; /* Thicker border */
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .testimonial-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }
        .testimonial-text {
            font-style: italic;
            margin-bottom: 1rem;
            color: #555;
            font-size: 1em;
        }
        .testimonial-author {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 0.5rem;
        }
        .testimonial-rating {
            color: #f1c40f; /* Yellow stars */
            font-size: 1.2em; /* Slightly larger stars */
            margin-top: 0.5rem;
        }

        /* Footer */
        footer {
            background-color: #2c3e50; /* Darker footer */
            color: white;
            text-align: center;
            padding: 2rem 1.5rem;
            font-size: 0.9em;
            margin-top: 2rem;
            box-shadow: 0 -4px 8px rgba(0, 0, 0, 0.15);
        }

        .footer-links {
            margin-bottom: 1rem;
        }
        .footer-links a {
            color: #7fc9ff; /* Lighter blue for links */
            text-decoration: none;
            margin: 0 0.8rem;
            transition: color 0.3s ease, text-decoration 0.3s ease;
        }
        .footer-links a:hover {
            color: #a4e0ff;
            text-decoration: underline;
        }

        .social-icons {
            margin: 1.5rem 0;
            font-size: 1.8em; /* Larger icons */
        }
        .social-icons span {
            margin: 0 0.8rem;
            cursor: pointer;
            transition: transform 0.2s ease, color 0.3s ease;
            color: #e0e0e0;
        }
        .social-icons span:hover {
            transform: scale(1.3);
            color: #3498db; /* Blue on hover */
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Styles for AI Diagnosis Section */
        .ai-diagnosis-section {
            background-color: #f0faff; /* Lighter blue background */
            padding: 4rem 1.5rem;
            margin-bottom: 2rem;
            border-radius: 1rem;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
            text-align: center;
        }
        .ai-diagnosis-section h2 {
            color: #3498db; /* Blue for the AI section header */
            margin-bottom: 1.5rem;
        }
        .ai-diagnosis-section p {
            font-size: 1.1em;
            color: #666;
            margin-bottom: 2rem;
        }
        .ai-diagnosis-section .form-group {
            max-width: 600px;
            margin: 0 auto 1.5rem auto;
            text-align: left;
        }
        .ai-diagnosis-section label {
            display: block;
            margin-bottom: 0.8rem;
            font-weight: bold;
            color: #444;
            font-size: 1.05em;
        }
        .ai-diagnosis-section textarea {
            width: 100%;
            min-height: 150px; /* Taller textarea */
            padding: 1rem;
            border: 1px solid #c0e0f0;
            border-radius: 0.5rem;
            font-size: 1em;
            box-sizing: border-box;
            resize: vertical;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            background-color: white;
        }
        .ai-diagnosis-section textarea:focus {
            border-color: #3498db;
            outline: none;
            box-shadow: 0 0 0 4px rgba(52, 152, 219, 0.2);
        }
        .diagnosis-result {
            margin-top: 2rem;
            background-color: #e8f9f8; /* Very light green/blue */
            padding: 1.5rem;
            border-radius: 0.8rem;
            text-align: left;
            min-height: 80px; /* Ensure some height for display */
            box-shadow: inset 0 0 10px rgba(0,0,0,0.05);
            border: 1px solid #c1e0e8;
            color: #2c3e50;
            font-size: 1em;
            line-height: 1.6;
            white-space: pre-wrap; /* Preserve whitespace and breaks */
            animation: slideInUp 0.6s ease-out forwards; /* Animation for result */
        }
        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        #loading-indicator {
            text-align: center;
            font-style: italic;
            color: #3498db;
            display: none;
            margin-top: 1rem;
        }

        /* --- Auth Modal Specific Styles --- */
        .auth-overlay {
            display: none; /* Hidden by default */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7); /* Darker overlay */
            z-index: 1001;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(8px); /* Added back for effect */
            -webkit-backdrop-filter: blur(8px); /* Added back for effect */
            animation: fadeInOverlay 0.3s ease-out;
        }
        @keyframes fadeInOverlay {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .auth-container {
            background: white;
            padding: 2.5rem; /* Increased padding */
            border-radius: 1rem; /* More rounded */
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4); /* More prominent shadow */
            max-width: 500px; /* Wider modal */
            width: 90%; /* Responsive width for smaller screens */
            position: relative;
            text-align: left;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideInDown 0.5s ease-out;
        }
        @keyframes slideInDown {
            from { opacity: 0; transform: translateY(-50px); }
            to { transform: translateY(0); opacity: 1; }
        }

        .close-auth-modal {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 2rem; /* Larger close button */
            cursor: pointer;
            color: #777;
            transition: color 0.3s ease, transform 0.2s ease;
        }
        .close-auth-modal:hover {
            color: #333;
            transform: rotate(90deg);
        }

        .auth-header-modal {
            text-align: center;
            margin-bottom: 2rem;
        }

        .auth-header-modal h1 {
            color: #2c3e50;
            font-size: 2rem; /* Larger heading */
            margin-bottom: 0.5rem;
            font-weight: 700;
        }
        .auth-header-modal p {
            color: #666;
            font-size: 1.05rem;
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 2rem;
            border-bottom: 2px solid #eee; /* Thicker border */
        }
        .tab-btn {
            flex: 1;
            padding: 1rem; /* Larger tabs */
            background: none;
            border: none;
            font-size: 1.1rem;
            font-weight: 600;
            color: #7f8c8d;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            outline: none;
        }

        .tab-btn.active {
            color: #3498db;
            border-color: #3498db;
        }

        .role-selection {
            margin-bottom: 2rem;
            text-align: center;
        }

        .role-selection label {
            font-weight: bold;
            margin-bottom: 1rem;
            display: block;
            color: #555;
            font-size: 1.05rem;
        }

        .role-options {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .role-btn {
            background-color: #f8faff; /* Light background for buttons */
            border: 2px solid #e0f0ff;
            padding: 0.8rem 1.5rem;
            border-radius: 0.8rem; /* More rounded */
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #555;
            outline: none;
        }

        .role-btn:hover {
            border-color: #c1dff0;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .role-btn.active {
            background-color: #eaf2f8;
            border-color: #3498db;
            color: #3498db;
            box-shadow: 0 0 10px rgba(52, 152, 219, 0.4);
        }

        .role-btn i {
            font-size: 1.2em;
        }
        .auth-form {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .auth-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 1.2rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.6rem;
            font-weight: 600;
            color: #333;
        }

        .form-group input[type="email"],
        .form-group input[type="password"],
        .form-group input[type="text"],
        .form-group input[type="tel"],
        .form-group select {
            width: 100%;
            padding: 0.8rem 1rem;
            border: 1px solid #ccc;
            border-radius: 0.5rem;
            font-size: 1rem;
            box-sizing: border-box;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
        .form-group input:focus, .form-group select:focus {
            border-color: #3498db;
            box-shadow: 0 0 0 4px rgba(52, 152, 219, 0.2);
            outline: none;
        }

        .password-input {
            position: relative;
        }

        .password-input input {
            padding-right: 2.8rem; /* Space for eye icon */
        }

        .toggle-password, .toggle-confirm-password {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            color: #7f8c8d;
            font-size: 1.1rem;
            transition: color 0.3s ease;
        }
        .toggle-password:hover, .toggle-confirm-password:hover {
            color: #333;
        }

        .auth-btn {
            width: 100%;
            padding: 1rem;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 0.5rem;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            margin-top: 1.5rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .auth-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }

        .auth-btn:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            opacity: 0.7;
            transform: none;
            box-shadow: none;
        }

        .auth-footer {
            margin-top: 1.5rem;
            text-align: center;
        }

        .forgot-password {
            color: #3498db;
            text-decoration: none;
            font-size: 0.95rem;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        .forgot-password:hover {
            color: #2980b9;
            text-decoration: underline;
        }

        /* OTP Modal Styles */
        .otp-modal, .forgot-password-modal { /* Combined styles for both OTP modals */
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1002; /* Higher than auth-overlay */
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            animation: fadeInOverlay 0.3s ease-out;
        }

        .otp-modal .modal-content, .forgot-password-modal .modal-content {
            background: white;
            padding: 2.5rem;
            border-radius: 1rem;
            max-width: 450px;
            width: 90%;
            position: relative;
            text-align: center;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4);
            max-height: 90vh;
            overflow-y: auto;
            animation: slideInDown 0.5s ease-out;
        }

        .close-otp-modal, .close-forgot-password-modal {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 2rem;
            cursor: pointer;
            color: #777;
            transition: color 0.3s ease, transform 0.2s ease;
        }
        .close-otp-modal:hover, .close-forgot-password-modal:hover {
            color: #333;
            transform: rotate(90deg);
        }

        .otp-input {
            display: flex;
            justify-content: space-between;
            margin: 2rem auto;
            gap: 0.5rem; /* Space between OTP digits */
            max-width: 300px; /* Limit width for OTP inputs */
        }

        .otp-digit {
            width: 45px; /* Fixed width for OTP boxes */
            height: 50px; /* Taller */
            text-align: center;
            font-size: 1.8rem; /* Larger font */
            border: 1px solid #ccc;
            border-radius: 0.5rem;
            box-sizing: border-box;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
        .otp-digit:focus {
            border-color: #3498db;
            box-shadow: 0 0 0 4px rgba(52, 152, 219, 0.2);
            outline: none;
        }

        .resend-otp {
            margin-top: 1rem;
            font-size: 0.95rem;
            color: #7f8c8d;
        }

        .resend-otp a {
            color: #3498db;
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s ease;
        }
        .resend-otp a:hover {
            color: #2980b9;
            text-decoration: underline;
        }

        /* Message Box */
       #message-container {
            position: fixed;
            top: 1.5rem;
            right: 1.5rem;
            z-index: 10002;
            pointer-events: none; /* Prevents blocking clicks */
        }

        .message-box {
            pointer-events: auto; /* Allows interaction with the message box itself */
            /* padding: 1rem 1.5rem;
            border-radius: 0.8rem;
            font-weight: bold;
            box-shadow: 0 6px 15px rgba(0,0,0,0.15);
            animation: fadeOut 0.5s forwards 4.5s;
            opacity: 1;
            transition: opacity 0.5s ease-out;
            min-width: 250px; */
            text-align: center;
            border: 1px solid;
            /* Added for better mobile display */
            box-sizing: border-box; /* Include padding and border in the element's total width and height */
            width: auto; /* Allow width to be determined by content */
            max-width: 90%; /* Max width for responsiveness */
            margin-left: auto; /* Center on smaller screens if messageContainer is wide */
            margin-right: auto;
            left: 0; /* Align left */
            right: 0; /* Align right */
        }
        .message-box.success {
            background-color: #d4edda;
            color: #155724;
            border-color: #c3e6cb;
        }
        .message-box.error {
            background-color: #f8d7da;
            color: #721c24;
            border-color: #f5c6cb;
        }
        .message-box.info {
            background-color: #d1ecf1;
            color: #0c5460;
            border-color: #bee5eb;
        }

        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        /* Technician Specific Fields */
        #technician-fields {
            display: none; /* Hidden by default */
        }
        #technician-fields input {
            margin-bottom: 1rem;
        }


        /* Responsive Design */
        @media (max-width: 768px) {
            header {
                flex-direction: column;
                align-items: flex-start;
                padding: 1rem;
            }
            .nav-menu {
                flex-direction: column;
                width: 100%;
                gap: 0.5rem;
                margin-top: 1rem;
                display: none; /* Hidden by default on mobile */
            }
            .nav-menu.active {
                display: flex; /* Show when active */
            }
            .menu-toggle {
                display: block; /* Show hamburger */
                align-self: flex-end; /* Push to right in header */
                margin-top: -2rem; /* Adjust vertical position */
            }

            h1 {
                font-size: 2.5em;
            }
            h2 {
                font-size: 2em;
            }
            p {
                font-size: 1em;
            }
            .btn {
                padding: 0.8rem 1.8rem;
                font-size: 1.1em;
                width: calc(100% - 1.5rem); /* Full width minus margin */
                box-sizing: border-box;
            }
            .btn-form-submit {
                width: 100%; /* Ensure form submit button is also full width */
            }

            .features-grid,
            .user-cta-grid,
            .testimonials-grid {
                grid-template-columns: 1fr; /* Stack columns vertically */
            }

            .feature-item, .user-cta-card, .testimonial-card {
                margin-bottom: 1.5rem; /* Add margin between stacked cards */
                max-width: none; /* Remove max-width constraint */
            }

            /* Auth modal responsive */
            .auth-container, .otp-modal .modal-content, .forgot-password-modal .modal-content {
                margin: 1rem;
                padding: 1.5rem;
                width: 95%; /* Adjust width for smaller screens */
                max-width: 95%; /* Ensure no overflow on very small screens */
            }

            .auth-header-modal h1 {
                font-size: 1.8rem;
            }

            .tab-btn {
                font-size: 0.95rem;
                padding: 0.8rem;
            }

            .role-options {
                flex-direction: column;
                gap: 0.8rem;
            }

            .role-btn {
                min-width: unset;
                width: 100%;
            }

            .otp-digit {
                width: 40px;
                height: 45px;
                font-size: 1.5rem;
            }

           
        }
    </style>
    <!-- Google Identity Services Library -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
    <!-- Header -->
    <header>
        <a href="#" class="logo">
            <span class="logo-icon">🔧</span> TechSeva
        </a>
        <button class="menu-toggle" id="menu-toggle">☰</button>
        <nav class="nav-menu" id="main-nav-menu">
            <li class="nav-item"><a href="/" class="active">Home</a></li>
            <li class="nav-item"><a href="working.html">How It Works</a></li>
            <li class="nav-item"><a href="contact.html">Contact</a></li>
            
            <li class="nav-item"><a href="javascript:void(0)" id="login-nav-btn">Login/Signup</a></li>
        </nav>
    </header>

    <main>
    <!-- Hero Section -->
    <section class="hero" id="home">
        <!-- <video autoplay muted loop playsinline class="hero-video">
            <source src="https://assets.mixkit.co/videos/preview/mixkit-technician-repairing-a-computer-while-a-woman-watches-43732-large.mp4" type="video/mp4">
        </video> -->
        <!-- <div class="hero-video-container">
            <iframe 
            src="https://www.youtube.com/embed/0L_Srf8wmEw?autoplay=1&mute=1&loop=1&controls=0&playlist=0L_Srf8wmEw" 
            frameborder="0" 
            allow="autoplay; encrypted-media" 
            class="hero-video">
            </iframe>
        </div> -->
        <video autoplay muted loop playsinline class="hero-video">
  <source src="/videos/Ac_ad.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <h1>Your Devices, Our Care</h1>
            <p>Fast, trusted repair & tech support at your doorstep</p>
            <div class="cta-buttons">
                <a href="#unauthenticated-book-service" class="btn btn-primary" id="scroll-to-book-service"><i class="fas fa-calendar-alt"></i> Book a Repair</a>
                <a href="javascript:void(0)" id="join-tech-btn" class="btn btn-secondary"><i class="fas fa-user-plus"></i> Join as Technician</a>
            </div>
            <!-- <div class="search-box">
                <input type="text" placeholder="Enter device or issue (e.g., iPhone screen repair)...">
                <button><i class="fas fa-search"></i> Search</button>
                <div class="device-suggestions">
                    <div class="device-suggestion"><i class="fas fa-mobile-alt"></i> Smartphone Repair</div>
                    <div class="device-suggestion"><i class="fas fa-laptop"></i> Laptop Repair</div>
                    <div class="device-suggestion"><i class="fas fa-tv"></i> TV & AC Service</div>
                    <div class="device-suggestion"><i class="fas fa-shield-alt"></i> Extended Warranty</div>
                </div>
            </div> -->
        </div>
        
    </section>

    <!-- Services Section -->
    <section class="services" id="services">
        <div class="circuit-lines"></div>
        <div class="container">
           <div class="section-title">
    <h2>Our Services</h2>
    <p>We provide comprehensive tech solutions for all your devices with certified expertise</p>
</div>

<div class="services-grid">

    <!-- Group 1: TV, AC, Refrigerator -->
    <div class="service-card">
        <div class="service-icon">
            <i class="fas fa-snowflake"></i>
        </div>
        <h3>TV / AC / Refrigerator Repair</h3>
        <!-- <p>We offer expert repair and maintenance services for:
            <ul>
                <li>AC Repair & Servicing (gas refilling, maintenance)</li>
                <li>TV Repair (screen, motherboard, no display issues)</li>
                <li>Refrigerator Repair (cooling problems, noise, water leaks)</li>
            </ul>
        </p> -->
        <a href="#unauthenticated-book-service" class="btn btn-primary">Book Now</a>
    </div>
      <div class="auth-overlay" id="phone-update-modal">
        <div class="auth-container">
            <span class="close-auth-modal" id="close-phone-update-modal">&times;</span>
            <div class="auth-header-modal">
                <img src="https://placehold.co/90x90/3498DB/FFFFFF/png?text=TS" alt="Service Logo" style="width: 70px; height: 70px; margin-bottom: 10px;">
                <h1>Almost There!</h1>
                <p>Please provide a phone number to complete your profile.</p>
            </div>
            <form id="phone-update-form">
                <div class="form-group">
                    <label for="phone-update-input">Phone Number:</label>
                    <input type="tel" id="phone-update-input" name="phoneNumber" placeholder="e.g., 9876543210" pattern="[0-9]{10}" required>
                </div>
                <button type="submit" class="auth-btn" id="phone-update-btn">Save & Continue</button>
            </form>
        </div>
    </div>

    <!-- Group 2: Washing Machine, Geyser, Microwave -->
    <div class="service-card">
        <div class="service-icon">
            <i class="fas fa-tools"></i>
        </div>
        <h3>Washing Machine / Geyser / Microwave Repair</h3>
        <!-- <p>Our certified technicians can repair and service:
            <ul>
                <li>Washing Machines (leaks, noise, drum not rotating)</li>
                <li>Geysers (not heating, thermostat, installation)</li>
                <li>Microwaves (not heating, sparks, display errors)</li>
            </ul>
        </p> -->
        <a href="#unauthenticated-book-service" class="btn btn-primary">Book Now</a>
    </div>

    <!-- Group 3: Fan, Smartphone, Laptop -->
    <div class="service-card">
        <div class="service-icon">
            <i class="fas fa-cogs"></i>
        </div>
        <h3>Fan / Smartphone / Laptop Repair</h3>
        <!-- <p>We provide reliable service for:
            <ul>
                <li>Fans (ceiling, pedestal, exhaust – motor & blade issues)</li>
                <li>Smartphones (screen, battery, water damage)</li>
                <li>Laptops (keyboard, battery, virus removal, OS install)</li>
            </ul>
        </p> -->
        <a href="#unauthenticated-book-service" class="btn btn-primary">Book Now</a>
    </div>

</div>

                
            
        </div>
    </section>

    <!-- Why Choose Us Section -->
    <section class="why-choose">
        <div class="floating-devices" id="floating-devices"></div>
        <div class="container">
            <div class="section-title">
                <h2>Why Choose TechSeva?</h2>
                <p>We're committed to providing the best service experience in the industry</p>
            </div>
            <div class="benefits">
                <div class="benefit-item">
                    <div class="benefit-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <h3>Fast Turnaround</h3>
                    <p>Most repairs completed in under 2 hours at your location with our mobile service vans.</p>
                </div>
                <div class="benefit-item">
                    <div class="benefit-icon">
                        <i class="fas fa-certificate"></i>
                    </div>
                    <h3>Certified Experts</h3>
                    <p>Our technicians are trained and certified by leading brands like Apple, Samsung, and Dell.</p>
                </div>
                <div class="benefit-item">
                    <div class="benefit-icon">
                        <i class="fas fa-rupee-sign"></i>
                    </div>
                    <h3>Transparent Pricing</h3>
                    <p>No hidden costs. Get upfront quotes with 90-day warranty on all repairs.</p>
                </div>
                <div class="benefit-item">
                    <div class="benefit-icon">
                        <i class="fas fa-map-marked-alt"></i>
                    </div>
                    <h3>Wide Coverage</h3>
                    <p>Serving in 50+ cities across India with 1000+ skilled technicians.</p>
                </div>
                <div class="benefit-item">
                    <div class="benefit-icon">
                        <i class="fas fa-headset"></i>
                    </div>
                    <h3>24/7 Support</h3>
                    <p>Round-the-clock customer support via chat, phone and email for all your queries.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="stats">
        <div class="container">
            <div class="stats-grid">
                <div class="stat-item">
                    <h3>50K+</h3>
                    <p>Devices Repaired</p>
                </div>
                <div class="stat-item">
                    <h3>1K+</h3>
                    <p>Certified Technicians</p>
                </div>
                <div class="stat-item">
                    <h3>50+</h3>
                    <p>Cities Covered</p>
                </div>
                <div class="stat-item">
                    <h3>4.9/5</h3>
                    <p>Customer Rating</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Booking Service Section for Unauthenticated/Authenticated Users -->
   <!-- Booking Service Section for Unauthenticated/Authenticated Users -->
<section id="unauthenticated-book-service" class="booking-section">
    <div class="container">
        <div class="section-title">
            <h2>Book a Service</h2>
            <p>Fill out the details below to book your service. If you're not logged in, you'll be prompted to do so.</p>
        </div>
        <form id="unauthenticated-booking-form">
            <div class="form-group">
                <label for="unauth-appliance-type">Select Appliance Type:</label>
                <select id="unauth-appliance-type" name="applianceType" required>
                    <option value="">-- Select --</option>
                    <option value="AC">AC Repair/Service</option>
                    <option value="Refrigerator">Refrigerator Repair</option>
                    <option value="Washing Machine">Washing Machine Repair</option>
                    <option value="TV">TV Repair</option>
                    <option value="Fan">Fan Repair</option>
                    <option value="Geyser">Geyser Repair</option>
                    <option value="Microwave">Microwave Repair</option>
                    <option value="Water Purifier">Water Purifier Repair</option>
                    <option value="Dishwasher">Dishwasher Repair</option>
                    <option value="Inverter">Inverter/Battery Repair</option>
                    <option value="Computer">Computer Repair</option>
                    <option value="Laptop">Laptop Repair</option>
                    <option value="Mobile">Mobile Phone Repair</option>
                    <option value="Electrical">General Electrical Work</option>
                    <option value="Plumbing">Plumbing Services</option>
                    <option value="Carpentry">Carpentry Services</option>
                    <option value="Painting">Painting Services</option>
                    <option value="Other">Other</option>
                </select>
            </div>

            <button type="submit" id="unauth-book-service-btn" class="btn btn-primary btn-form-submit">Book Service</button>
        </form>
    </div>
</section>


    <!-- AI Diagnosis Section -->
    <section id="ai-diagnosis-section" class="ai-diagnosis-section">
            <div class="container">
                <h2>✨ AI Appliance Diagnoser ✨</h2>
                <p>Describe your appliance's problem and get an instant preliminary diagnosis from our AI. This can help you understand the issue better before booking a service.</p>
                <div class="form-group">
                    <label for="appliance-problem">What's wrong with your appliance?</label>
                    <textarea id="appliance-problem" placeholder="e.g., My refrigerator is not cooling, but the light is on."></textarea>
                </div>
                <button id="get-diagnosis-btn" class="btn btn-primary">Get AI Diagnosis ✨</button>
                <div id="diagnosis-result" class="diagnosis-result" style="display: none;">
                    <!-- AI Diagnosis will be displayed here -->
                </div>
                <p id="loading-indicator" style="display: none;">Diagnosing problem... Please wait.</p>
            </div>
        </section>

    <!-- Join as Partner Section -->
    <section class="join-section" id="join">
        <div class="container">
            <h2>Fix & Earn with TechSeva</h2>
            <p>Join our network of certified technicians and get flexible work opportunities with daily payouts</p>
            <div class="benefits-list">
                <div class="benefit-tag">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Flexible Schedule</span>
                </div>
                <div class="benefit-tag">
                    <i class="fas fa-wallet"></i>
                    <span>Daily Payouts</span>
                </div>
                <div class="benefit-tag">
                    <i class="fas fa-graduation-cap"></i>
                    <span>Free Training</span>
                </div>
                <div class="benefit-tag">
                    <i class="fas fa-tools"></i>
                    <span>Toolkit Provided</span>
                </div>
                <div class="benefit-tag">
                    <i class="fas fa-users"></i>
                    <span>Support Team</span>
                </div>
                <div class="benefit-tag">
                    <i class="fas fa-chart-line"></i>
                    <span>Growth Opportunities</span>
                </div>
            </div>
            <a href="javascript:void(0)" id="join-tech-btn-bottom" class="btn btn-primary"><i class="fas fa-user-plus"></i> Become a Technician</a>
        </div>
    </section>

    <!-- App Download Section -->
    <section class="app-section">
    <div class="container">
        <div class="section-title">
            <h2>TechSeva Mobile App</h2>
            <p>Track your repair, chat with experts & shop on the go</p>
        </div>
        <div class="app-content">
            <div class="app-image">
                <img src="/images/TechSevaMobileApp.png" alt="TechSeva Mobile App">
            </div>
            <div class="app-details">
                <h3>Everything you need in one app</h3>
                <p>Our mobile app makes it easy to book services, track repair status in real-time, chat with technicians, and purchase accessories - all from your smartphone.</p>
                
                <div class="app-features">
                    <div class="app-feature">
                        <i class="fas fa-check-circle"></i>
                        <span>Real-time repair tracking</span>
                    </div>
                    <div class="app-feature">
                        <i class="fas fa-check-circle"></i>
                        <span>Instant quotes for services</span>
                    </div>
                    <div class="app-feature">
                        <i class="fas fa-check-circle"></i>
                        <span>Chat directly with technicians</span>
                    </div>
                    <div class="app-feature">
                        <i class="fas fa-check-circle"></i>
                        <span>Exclusive app-only discounts</span>
                    </div>
                </div>
                
                <div class="app-badges">
                    <img src="/images/GooglePlay.png" alt="Google Play" class="app-badge">
                    <img src="/images/AppStore.png" alt="App Store" class="app-badge">
                </div>
                
                <div class="qr-container">
                    <img src="/images/QRCode.png" alt="QR Code" class="qr-code">
                    <div class="qr-text">Scan to download the TechSeva app directly to your device</div>
                </div>
            </div>
        </div>
    </div>
</section>

    <!-- User Types CTA Section (from index1.html) -->
    <section class="user-types-cta-section">
        <div class="container">
            <div class="section-title">
                <h2>Who Are You?</h2>
            </div>
            <div class="user-cta-grid">
                <a href="javascript:void(0)" class="user-cta-card customer" id="customer-cta-btn">
                    <h3><span class="user-icon">👤</span> I am a Customer</h3>
                    <p>Need a quick and reliable appliance repair? Book a service now!</p>
                    <button class="btn btn-primary" style="margin-top: 20px;">Book Service</button>
                </a>
                <a href="javascript:void(0)" class="user-cta-card technician" id="technician-cta-btn">
                    <h3><span class="user-icon">👷</span> I am a Technician</h3>
                    <p>Grow your business, get more jobs, and earn more with TechSeva.</p>
                    <button class="btn btn-primary" style="margin-top: 20px;">Join Now</button>
                </a>
                <a href="https://tech-seva.onrender.com/admin-login" class="user-cta-card admin" id="admin-cta-btn">
                    <h3><span class="user-icon">👑</span> I am an Admin</h3>
                    <p>Manage users, jobs, and platform operations efficiently.</p>
                    <button class="btn btn-primary" style="margin-top: 20px;">Access Admin</button>
                </a>
            </div>
        </div>
    </section>

    <!-- Multilingual Support Banner (from index1.html) -->
    <section class="multilingual-banner">
        <div class="container">
            <div class="section-title">
                <h2>Available in Your Language!</h2>
                <p>Available in Hindi, Bhojpuri, Bengali, Tamil, Telugu & more!</p>
            </div>
            <div class="language-dropdown-placeholder">
                Select Language 🌐
                <!-- This is a placeholder for UI demonstration. A real dropdown would be here -->
            </div>
        </div>
    </section>

    <!-- Testimonials Section -->
    <section class="testimonials" id="testimonials">
        <div class="container">
            <div class="section-title">
                <h2>What Our Customers Say</h2>
                <p>Hear from people who trusted TechSeva with their devices</p>
            </div>
            <div class="testimonial-slider">
                <div class="testimonial-track">
                    <div class="testimonial-card">
                        <div class="testimonial-avatar">
                            <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Rahul Sharma">
                        </div>
                        <p class="testimonial-text">"My iPhone screen was repaired in just 45 minutes at my office. The technician was professional and the quality is perfect! I've used their service three times now and it's consistently excellent."</p>
                        <h4 class="testimonial-author">Rahul Sharma</h4>
                        <p class="testimonial-role">Delhi | Marketing Executive</p>
                        <div class="testimonial-rating">★★★★★</div>
                    </div>
                    <div class="testimonial-card">
                        <div class="testimonial-avatar">
                            <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Priya Patel">
                        </div>
                        <p class="testimonial-text">"Great service! My laptop was fixed the same day and they even gave me tips to maintain it better. The pricing was transparent and much cheaper than the brand service center."</p>
                        <h4 class="testimonial-author">Priya Patel</h4>
                        <p class="testimonial-role">Mumbai | College Student</p>
                        <div class="testimonial-rating">★★★★★</div>
                    </div>
                    <div class="testimonial-card">
                        <div class="testimonial-avatar">
                            <img src="https://randomuser.me/api/portraits/men/75.jpg" alt="Vikram Singh">
                        </div>
                        <p class="testimonial-text">"As a partner technician, I'm earning more than my previous shop job with flexible hours. The support team is always helpful and payments come on time every day."</p>
                        <h4 class="testimonial-author">Vikram Singh</h4>
                        <p class="testimonial-role">TechSeva Partner | Bangalore</p>
                        <div class="testimonial-rating">★★★★★</div>
                    </div>
                    <div class="testimonial-card">
                        <div class="testimonial-avatar">
                            <img src="https://randomuser.me/api/portraits/women/68.jpg" alt="Ananya Gupta">
                        </div>
                        <p class="testimonial-text">"The technician arrived exactly on time and fixed my washing machine in under an hour. The app made it so easy to book and track the service. Highly recommended!"</p>
                        <h4 class="testimonial-author">Ananya Gupta</h4>
                        <p class="testimonial-role">Hyderabad | Homemaker</p>
                        <div class="testimonial-rating">★★★★☆</div>
                    </div>
                </div>
                <div class="slider-nav">
                    <!-- <div class="slider-dot active"></div> -->
                    <!-- <div class="slider-dot"></div>
                    <div class="slider-dot"></div>
                    <div class="slider-dot"></div> -->
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section class="faq" id="faq-section">
        <div class="container">
            <div class="section-title">
                <h2>Frequently Asked Questions</h2>
                <p>Find quick answers to common questions about our services</p>
            </div>
            <div class="faq-container">
                <div class="faq-item">
                    <div class="faq-question">
                        <span>How quickly can you repair my device?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Most common repairs like screen replacements are completed within 1-2 hours at your location. For more complex issues, we provide a diagnosis within 30 minutes and will give you an accurate time estimate.</p>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span>Are your technicians certified?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Yes, all our technicians undergo rigorous training and are certified by leading brands. We also conduct regular skill assessments to ensure the highest quality of service.</p>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span>What warranty do you provide on repairs?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>All repairs come with a 90-day warranty on both parts and labor. For screen replacements, we offer a 180-day warranty.</p>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span>How do I become a TechSeva technician?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Visit our "Become a Technician" section to apply. We provide free training, tools, and flexible earning opportunities. Basic technical knowledge is required.</p>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span>Do you use genuine parts for repairs?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>We use OEM (Original Equipment Manufacturer) parts that meet or exceed original specifications. You can choose between premium OEM parts or more affordable high-quality alternatives.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- City Coverage Section -->
    <section class="coverage">
        <div class="container">
            <div class="section-title">
                <h2>We Serve Across India</h2>
                <p>Currently operating in these cities with more coming soon</p>
            </div>
            <div class="city-grid">
                <div class="city-item">Delhi NCR</div>
                <div class="city-item">Mumbai</div>
                <div class="city-item">Bangalore</div>
                <div class="city-item">Hyderabad</div>
                <div class="city-item">Chennai</div>
                <div class="city-item">Kolkata</div>
                <div class="city-item">Pune</div>
                <div class="city-item">Ahmedabad</div>
                <div class="city-item">Jaipur</div>
                <div class="city-item">Lucknow</div>
                <div class="city-item">Chandigarh</div>
                <div class="city-item">Indore</div>
            </div>
        </div>
    </section>
    </main>

    <!-- Footer -->
    <footer>
        <div class="footer-wave"></div>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>TechSeva</h3>
                    <p>India's most trusted tech service and repair platform, bringing expert solutions to your doorstep.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div class="footer-column">
                    <h3>Services</h3>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Smartphone Repair</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Laptop Repair</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> TV & AC Service</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Extended Warranty</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Accessories Shop</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Company</h3>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fas fa-chevron-right"></i> About Us</a></li>
                        <li><a href="https://techseva-careers.onrender.com/careers"><i class="fas fa-chevron-right"></i> Careers</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Blog</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Press</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Partner With Us</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Support</h3>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Help Center</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Contact Us</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Privacy Policy</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Terms of Service</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> FAQ</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Newsletter</h3>
                    <div class="newsletter">
                        <p>Subscribe to get updates on offers and tech tips</p>
                        <form class="newsletter-form">
                            <input type="email" placeholder="Your email address">
                            <button type="submit"><i class="fas fa-paper-plane"></i></button>
                        </form>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <div class="payment-methods">
                    <img src="https://via.placeholder.com/50x30/ffffff/007acc?text=Visa" alt="Visa" class="payment-method">
                    <img src="https://via.placeholder.com/50x30/ffffff/007acc?text=MC" alt="Mastercard" class="payment-method">
                    <img src="https://via.placeholder.com/50x30/ffffff/007acc?text=Paytm" alt="Paytm" class="payment-method">
                    <img src="https://via.placeholder.co/50x30/ffffff/007acc?text=UPI" alt="UPI" class="payment-method">
                    <img src="https://via.placeholder.co/50x30/ffffff/007acc?text=Amex" alt="Amex" class="payment-method">
                </div>
                <p>&copy; 2023 TechSeva Technologies Pvt Ltd. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Auth Overlay and Modals -->
    <div class="auth-overlay" id="auth-overlay">
        <div class="auth-container">
            <span class="close-auth-modal" id="close-auth-modal">&times;</span>
            <div class="auth-header-modal">
                <img src="https://placehold.co/90x90/3498DB/FFFFFF/png?text=TS" alt="Service Logo" style="width: 70px; height: 70px; margin-bottom: 10px;">
                <h1>Welcome to TechSeva</h1>
                <p>Login or create your account to get started.</p>
            </div>

            <div class="auth-tabs">
                <button class="tab-btn active" id="login-tab">Login</button>
                <button class="tab-btn" id="signup-tab">Sign Up</button>
            </div>

            <div class="role-selection">
                <label>I am a:</label>
                <div class="role-options">
                    <button class="role-btn active" data-role="user">
                        <i class="fas fa-user"></i> User
                    </button>
                    <button class="role-btn" data-role="technician">
                        <i class="fas fa-tools"></i> Technician
                    </button>
                    <!-- Admin role button removed from here -->
                </div>
            </div>

            <!-- Login Form -->
            <form id="login-form" class="auth-form active">
                <div class="form-group">
                    <label for="login-email">Email:</label>
                    <input type="email" id="login-email" name="email" placeholder="Enter your email" required>
                </div>
                <div class="form-group password-input">
                    <label for="login-password">Password:</label>
                    <input type="password" id="login-password" name="password" placeholder="Enter your password" required>
                    <i class="fas fa-eye toggle-password"></i>
                </div>
                <input type="hidden" id="login-user-role" name="role" value="user"> <!-- Hidden input for role -->
                <button type="submit" class="auth-btn">Login</button>
                <div class="auth-footer">
                    <p style="margin-bottom: 10px;">OR</p>
                    <!-- Google Sign-in button for Login -->
                    <div id="g_id_signin_wrapper">
                        <div class="g_id_signin"
                             data-type="standard"
                             data-shape="rectangular"
                             data-theme="outline"
                             data-text="signin_with"
                             data-size="large"
                             data-context="signin"> <!-- Removed data-width for better responsiveness -->
                        </div>
                    </div>
                    <a href="javascript:void(0)" class="forgot-password" id="forgot-password-link">Forgot Password?</a>
                </div>
            </form>

            <!-- Sign Up Form -->
            <form id="signup-form" class="auth-form">
                <div class="form-group">
                    <label for="signup-fullname">Full Name:</label>
                    <input type="text" id="signup-fullname" name="fullName" placeholder="Your Full Name" required>
                </div>
                <div class="form-group">
                    <label for="signup-email">Email:</label>
                    <input type="email" id="signup-email" name="email" placeholder="Your Email Address" required>
                </div>
                <div class="form-group">
                    <label for="signup-phone">Phone Number:</label>
                    <input type="tel" id="signup-phone" name="phoneNumber" placeholder="e.g., 9876543210" pattern="[0-9]{10}" required>
                </div>
                <div class="form-group password-input">
                    <label for="signup-password">Password:</label>
                    <input type="password" id="signup-password" name="password" placeholder="Min 8 characters" minlength="8" required>
                    <i class="fas fa-eye toggle-password"></i>
                </div>
                <div class="form-group password-input" id="signup-confirm-password-group">
                    <label for="signup-confirm-password">Confirm Password:</label>
                    <input type="password" id="signup-confirm-password" name="confirmPassword" placeholder="Confirm your password" minlength="8" required>
                    <i class="fas fa-eye toggle-confirm-password"></i>
                </div>

                <!-- Technician Specific Fields (Initially Hidden) -->
                <div id="technician-fields">
                    <div class="form-group">
                        <label for="signup-aadhaar">Aadhaar Number:</label>
                        <input type="text" id="signup-aadhaar" name="aadhaar" placeholder="12-digit Aadhaar" pattern="[0-9]{12}">
                    </div>
                    <div class="form-group">
                        <label for="signup-pan">PAN Number:</label>
                        <input type="text" id="signup-pan" name="pan" placeholder="10-character PAN (e.g., ABCDE1234F)" pattern="[A-Z]{5}[0-9]{4}[A-Z]{1}">
                    </div>
                    <div class="form-group">
                        <label for="signup-skills">Skills (comma-separated):</label>
                        <input type="text" id="signup-skills" name="skills" placeholder="e.g., AC Repair, Electrician">
                    </div>
                </div>

                <input type="hidden" id="signup-user-role" name="role" value="user">
                <button type="submit" class="auth-btn">Sign Up</button>
                <div class="auth-footer">
                    <p id="signup-or-separator" style="margin-bottom: 10px;">OR</p> <!-- Added ID to OR paragraph -->
                    <!-- Google Sign-in button for Register -->
                    <div id="g_id_signup_wrapper">
                        <div class="g_id_signin"
                             data-type="standard"
                             data-shape="rectangular"
                             data-theme="outline"
                             data-text="signup_with"
                             data-size="large"
                             data-context="signup"> <!-- Removed data-width for better responsiveness -->
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- OTP Verification Modal (for Signup) -->
    <div id="otp-modal" class="otp-modal">
        <div class="modal-content">
            <span class="close-otp-modal">&times;</span>
            <h2>Email Verification</h2>
            <p>We've sent a 6-digit OTP to your email <span id="user-email-display"></span></p>
            <div class="otp-input">
                <input type="text" maxlength="1" class="otp-digit" pattern="\d*">
                <input type="text" maxlength="1" class="otp-digit" pattern="\d*">
                <input type="text" maxlength="1" class="otp-digit" pattern="\d*">
                <input type="text" maxlength="1" class="otp-digit" pattern="\d*">
                <input type="text" maxlength="1" class="otp-digit" pattern="\d*">
                <input type="text" maxlength="1" class="otp-digit" pattern="\d*">
            </div>
            <button id="verify-otp" class="auth-btn">Verify</button>
            <p class="resend-otp">Didn't receive OTP? <a href="javascript:void(0)" id="resend-otp">Resend</a></p>
        </div>
    </div>

    <!-- Forgot Password Modal -->
    <div id="forgot-password-modal" class="forgot-password-modal">
        <div class="modal-content">
            <span class="close-forgot-password-modal">&times;</span>
            <h2 id="forgot-password-title">Forgot Password?</h2>
            <p id="forgot-password-message">Enter your email to receive a password reset OTP.</p>

            <!-- Forgot Password Email Input Form -->
            <form id="forgot-password-email-form">
                <div class="form-group">
                    <label for="forgot-password-email">Email:</label>
                    <input type="email" id="forgot-password-email" name="email" placeholder="Enter your registered email" required>
                </div>
                <button type="submit" class="auth-btn" id="send-reset-otp-btn">Send Reset OTP</button>
                <div class="auth-footer" style="margin-top: 15px;">
                    <a href="javascript:void(0)" id="back-to-login-from-forgot-password">Back to Login</a>
                </div>
            </form>

            <!-- Reset Password Form (Hidden by default) -->
            <form id="reset-password-form" style="display: none;">
                <p id="reset-otp-sent-message">We've sent an OTP to <span id="reset-email-display"></span>. Please enter it below.</p>
                <div class="otp-input">
                    <input type="text" maxlength="1" class="otp-digit reset-otp-digit" pattern="\d*">
                    <input type="text" maxlength="1" class="otp-digit reset-otp-digit" pattern="\d*">
                    <input type="text" maxlength="1" class="otp-digit reset-otp-digit" pattern="\d*">
                    <input type="text" maxlength="1" class="otp-digit reset-otp-digit" pattern="\d*">
                    <input type="text" maxlength="1" class="otp-digit reset-otp-digit" pattern="\d*">
                    <input type="text" maxlength="1" class="otp-digit reset-otp-digit" pattern="\d*">
                </div>
                <div class="form-group password-input">
                    <label for="new-password">New Password:</label>
                    <input type="password" id="new-password" name="newPassword" placeholder="Min 8 characters" minlength="8" required>
                    <i class="fas fa-eye toggle-password"></i>
                </div>
                <div class="form-group password-input">
                    <label for="confirm-new-password">Confirm New Password:</label>
                    <input type="password" id="confirm-new-password" name="confirmNewPassword" placeholder="Confirm new password" minlength="8" required>
                    <i class="fas fa-eye toggle-confirm-password"></i>
                </div>
                <button type="submit" class="auth-btn" id="submit-reset-password-btn">Reset Password</button>
                <p class="resend-otp">Didn't receive OTP? <a href="javascript:void(0)" id="resend-reset-otp-btn">Resend</a></p>
            </form>
        </div>
    </div>

    <!-- Message Box Placeholder -->
    <div id="message-container"></div>

    <!-- Google Identity Services Initialization - Moved to a global location -->
    <!-- This div should be present only once on the page to initialize GSI client -->
    <div id="g_id_onload"
        data-client_id="162423995881-uvq3jdk68i8lsfkk497llfvkp0a45ovm.apps.googleusercontent.com" 
        data-callback="handleCredentialResponse"
        data-nonce="ANY_RANDOM_STRING">
    </div>

    <!-- Load your compiled React bundle FIRST with cache-busting -->
    <script src="/js/react-bundle.js?v=<%= new Date().getTime() %>"></script>

    <!-- Main JavaScript for page functionality (including mounting React) -->
        <script>
        // Function to display messages (success/error)
        const showMessage = (message, type = 'success') => {
            const messageContainer = document.getElementById('message-container');
            if (!messageContainer) return;

            // Ensure the container is displayed when a message is present
            messageContainer.style.display = 'block'; 

            // Remove any existing messages to only show the latest
            const existingMessageBox = messageContainer.querySelector('.message-box');
            if (existingMessageBox) {
                existingMessageBox.remove();
            }

            const messageBox = document.createElement('div');
            messageBox.className = `message-box ${type}`;
            messageBox.textContent = message;
            messageContainer.appendChild(messageBox);

            setTimeout(() => {
                // Fade out and remove the message box
                messageBox.style.opacity = '0';
                setTimeout(() => {
                    messageBox.remove();
                    // Optionally hide the container again if no messages are left
                    if (!messageContainer.children.length) {
                        messageContainer.style.display = 'none';
                    }
                }, 500); // Wait for fadeOut animation
            }, 4500); // Message visible for 4.5 seconds before fading out
        };

        // Function to check if user is logged in
        async function checkIfLoggedIn() {
            try {
                const response = await fetch('/api/user/me'); // A protected endpoint
                if (response.ok) {
                    const result = await response.json();
                    return result.success && result.user; // True if user data returned, false otherwise
                }
                return false;
            } catch (error) {
                console.warn('Error checking login status:', error);
                return false; // Assume not logged in on network error
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            // --- General UI Elements ---
            const menuToggle = document.getElementById('menu-toggle');
            const mainNavMenu = document.getElementById('main-nav-menu');
            const loginNavBtn = document.getElementById('login-nav-btn');
            const joinTechBtn = document.getElementById('join-tech-btn'); // Hero section 'Join as Technician'
            const customerCtaBtn = document.getElementById('customer-cta-btn'); // 'I am a Customer' CTA
            const technicianCtaBtn = document.getElementById('technician-cta-btn'); // 'I am a Technician' CTA
            const adminCtaBtn = document.getElementById('admin-cta-btn'); // 'I am an Admin' CTA
            const getDiagnosisBtn = document.getElementById('get-diagnosis-btn'); // AI Diagnosis button
            const applianceProblemInput = document.getElementById('appliance-problem'); // AI Diagnosis textarea
            const diagnosisResultDiv = document.getElementById('diagnosis-result'); // AI Diagnosis result div
            const loadingIndicator = document.getElementById('loading-indicator'); // AI Diagnosis loading indicator
            const scrollToBookServiceBtn = document.getElementById('scroll-to-book-service'); // New button for scrolling

            // --- Auth Modal Elements ---
            const authOverlay = document.getElementById('auth-overlay');
            const closeAuthModal = document.getElementById('close-auth-modal');
            const loginTab = document.getElementById('login-tab');
            const signupTab = document.getElementById('signup-tab');
            const loginForm = document.getElementById('login-form'); // This is the <form> for login
            const signupForm = document.getElementById('signup-form'); // This is the <form> for signup
            const roleButtons = document.querySelectorAll('.role-btn');
            // const adminLoginRoleBtn = document.getElementById('admin-login-role-btn'); // Admin role button removed from HTML
            const loginRoleInput = document.getElementById('login-user-role'); // Hidden input in login form
            const signupRoleInput = document.getElementById('signup-user-role'); // Hidden input in signup form
            const technicianFields = document.getElementById('technician-fields'); // Technician specific fields div
            const signupConfirmPasswordGroup = document.getElementById('signup-confirm-password-group'); // Confirm password group for signup
            const forgotPasswordLink = document.getElementById('forgot-password-link'); // Added ID to link
            
            // --- OTP Modal Elements (for Signup) ---
            const otpModal = document.getElementById('otp-modal');
            const closeOtpModalBtn = otpModal.querySelector('.close-otp-modal');
            const userEmailDisplay = document.getElementById('user-email-display');
            const otpDigits = otpModal.querySelectorAll('.otp-digit');
            const verifyOtpBtn = document.getElementById('verify-otp');
            const resendOtpBtn = document.getElementById('resend-otp');

            // --- Forgot Password Modal Elements ---
            const forgotPasswordModal = document.getElementById('forgot-password-modal');
            const closeForgotPasswordModalBtn = forgotPasswordModal.querySelector('.close-forgot-password-modal');
            const forgotPasswordEmailForm = document.getElementById('forgot-password-email-form');
            const forgotPasswordEmailInput = document.getElementById('forgot-password-email');
            const sendResetOtpBtn = document.getElementById('send-reset-otp-btn');
            const resetPasswordForm = document.getElementById('reset-password-form');
            const resetEmailDisplay = document.getElementById('reset-email-display');
            const resetOtpDigits = resetPasswordForm.querySelectorAll('.reset-otp-digit'); // Specific class for reset OTP inputs
            const newPasswordInput = document.getElementById('new-password');
            const confirmNewPasswordInput = document.getElementById('confirm-new-password');
            const submitResetPasswordBtn = document.getElementById('submit-reset-password-btn');
            const resendResetOtpBtn = document.getElementById('resend-reset-otp-btn');
            const backToLoginFromForgotPassword = document.getElementById('back-to-login-from-forgot-password');

            // --- Unauthenticated Booking Form Elements (Re-introduced) ---
            const unauthenticatedBookingForm = document.getElementById('unauthenticated-booking-form'); // Corrected ID
            const unauthApplianceType = document.getElementById('unauth-appliance-type');
            // IMPORTANT: This is now the hidden input that React will update
            const unauthLocationHiddenInput = document.getElementById('unauth-location-input'); 
            const unauthScheduledDatetime = document.getElementById('unauth-scheduled-datetime');
            const unauthNotes = document.getElementById('unauth-notes');
            const unauthBookServiceBtn = document.getElementById('unauth-book-service-btn');
            // This is the div where React component will be mounted
            const reactLocationSearchMountPoint = document.getElementById('react-location-search-mount-point');
            // This div is no longer strictly needed for display, as React manages its own input value
            const reactLocationDisplayText = document.getElementById('react-location-display-text');

            // --- Google Signup Button Element and OR Separator for dynamic visibility ---
            const googleSignupWrapper = document.getElementById('g_id_signup_wrapper');
            const signupOrSeparator = document.getElementById('signup-or-separator'); // Get the OR paragraph

            // START: ADD NEW MODAL ELEMENT REFERENCES HERE
            const phoneUpdateModal = document.getElementById('phone-update-modal');
            const closePhoneUpdateModalBtn = document.getElementById('close-phone-update-modal');
            const phoneUpdateForm = document.getElementById('phone-update-form');
            const phoneUpdateInput = document.getElementById('phone-update-input');
            const phoneUpdateBtn = document.getElementById('phone-update-btn');
            // END: ADD NEW MODAL ELEMENT REFERENCES


            // --- Navbar Hamburger Menu Toggle ---
            menuToggle.addEventListener('click', () => {
                mainNavMenu.classList.toggle('active');
            });

            // --- Show Auth Modal Function ---
            const showAuthModal = (initialTab = 'login', initialRole = 'user') => {
                authOverlay.style.display = 'flex'; // Show the modal overlay
                forgotPasswordModal.style.display = 'none'; // Ensure forgot password modal is hidden
                phoneUpdateModal.style.display = 'none'; // Ensure new phone modal is hidden

                // Set initial tab and update Google button context
                if (initialTab === 'signup') {
                    signupTab.click(); // Programmatically click signup tab
                } else {
                    loginTab.click(); // Programmatically click login tab
                }

                // Set initial role (simulate click on role button)
                roleButtons.forEach(button => {
                    if (button.dataset.role === initialRole) {
                        button.click();
                    }
                });
            };

            // --- Event Listeners to Open Auth Modal ---
            loginNavBtn.addEventListener('click', () => showAuthModal('login', 'user'));
            joinTechBtn.addEventListener('click', () => showAuthModal('signup', 'technician'));
            customerCtaBtn.addEventListener('click', (e) => { e.preventDefault(); showAuthModal('login', 'user'); });
            technicianCtaBtn.addEventListener('click', (e) => { e.preventDefault(); showAuthModal('signup', 'technician'); });
            
            // --- Admin CTA Button now directly redirects ---
            adminCtaBtn.addEventListener('click', (e) => {
                e.preventDefault(); // Prevent default anchor behavior
                window.location.href = 'https://tech-seva.onrender.com/admin-login';
            });

            // --- Close Auth Modal ---
            closeAuthModal.addEventListener('click', () => {
                authOverlay.style.display = 'none';
                showMessage('', null); // Clear any general messages
            });

            // Close auth modal if clicked outside
            authOverlay.addEventListener('click', (e) => {
                if (e.target === authOverlay) {
                    authOverlay.style.display = 'none';
                    showMessage('', null); // Clear any general messages
                }
            });

            // --- Tab Switching Logic (Login/Signup) ---
            loginTab.addEventListener('click', () => {
                loginTab.classList.add('active');
                signupTab.classList.remove('active');
                loginForm.classList.add('active');
                signupForm.classList.remove('active');

                showMessage('', null); // Clear general message box

                // Ensure technician fields are hidden for login tab
                technicianFields.style.display = 'none';
                // Remove required attributes from technician fields when hidden
                technicianFields.querySelectorAll('input').forEach(input => input.removeAttribute('required'));

                // For login, default to user role. All roles (user, technician) are visible now.
                document.querySelector('.role-btn[data-role="user"]').click(); 

                // Re-render Google button for login context
                google.accounts.id.renderButton(
                    document.querySelector('#login-form .g_id_signin'),
                    {
                        type: "standard",
                        shape: "rectangular",
                        theme: "outline",
                        text: "signin_with",
                        size: "large",
                        context: "signin"
                    }
                );
            });

            signupTab.addEventListener('click', () => {
                signupTab.classList.add('active');
                loginTab.classList.remove('active');
                signupForm.classList.add('active');
                loginForm.classList.remove('active');

                showMessage('', null); // Clear general message box

                // Default to user on signup tab switch; this will make Google button visible
                document.querySelector('.role-btn[data-role="user"]').click();

                // Re-render Google button for signup context (initially visible)
                if (googleSignupWrapper) {
                    googleSignupWrapper.style.display = 'flex'; // Ensure it's visible by default for signup form
                    // Call renderButton here only if you need to re-initialize it for some reason,
                    // otherwise, the onload initialization usually handles it.
                    // This re-rendering will ensure the size attributes are picked up again.
                     google.accounts.id.renderButton(
                        document.querySelector('#signup-form .g_id_signin'), // Targeting the signup button
                        {
                            type: "standard",
                            shape: "rectangular",
                            theme: "outline",
                            text: "signup_with",
                            size: "large",
                            context: "signup"
                        }
                    );
                }
                if (signupOrSeparator) {
                    signupOrSeparator.style.display = 'block'; // Ensure OR is visible by default for signup form
                }
            });

            // --- Role Selection Logic (User, Technician) ---
            roleButtons.forEach(button => {
                button.addEventListener('click', () => {
                    roleButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');

                    const selectedRole = button.dataset.role;

                    // Update hidden role inputs for both forms, depending on which form is active
                    if (loginForm.classList.contains('active')) {
                        loginRoleInput.value = selectedRole;
                    } else if (signupForm.classList.contains('active')) {
                        signupRoleInput.value = selectedRole;
                        // Toggle technician-specific fields visibility based on role for signup form
                        if (selectedRole === 'technician') {
                            technicianFields.style.display = 'block';
                            // Make technician fields required for signup
                            document.getElementById('signup-aadhaar').setAttribute('required', 'required');
                            document.getElementById('signup-pan').setAttribute('required', 'required');
                            document.getElementById('signup-skills').setAttribute('required', 'required');
                            
                            // Hide Google Signup button and OR for technicians
                            if (googleSignupWrapper) {
                                googleSignupWrapper.style.display = 'none';
                            }
                            if (signupOrSeparator) {
                                signupOrSeparator.style.display = 'none';
                            }
                        } else { // User role selected
                            technicianFields.style.display = 'none';
                            // Remove required attribute if not technician
                            document.getElementById('signup-aadhaar').removeAttribute('required');
                            document.getElementById('signup-pan').removeAttribute('required');
                            document.getElementById('signup-skills').removeAttribute('required');

                            // Show Google Signup button and OR for users
                            if (googleSignupWrapper) {
                                googleSignupWrapper.style.display = 'flex';
                                // Re-render the Google button to ensure correct sizing is applied when it becomes visible
                                google.accounts.id.renderButton(
                                    document.querySelector('#signup-form .g_id_signin'),
                                    {
                                        type: "standard",
                                        shape: "rectangular",
                                        theme: "outline",
                                        text: "signup_with",
                                        size: "large",
                                        context: "signup"
                                    }
                                );
                            }
                            if (signupOrSeparator) {
                                signupOrSeparator.style.display = 'block';
                            }
                        }
                    }
                });
            });

            // Set initial active role button and hidden input value on page load
            // This needs to be done AFTER the tab listeners are set up for proper behavior
            document.querySelector('.role-btn[data-role="user"]').click();


            // --- Password Toggle Logic ---
            document.querySelectorAll('.toggle-password, .toggle-confirm-password').forEach(toggle => {
                toggle.addEventListener('click', () => {
                    const passwordInput = toggle.previousElementSibling;
                    const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                    passwordInput.setAttribute('type', type);
                    toggle.classList.toggle('fa-eye');
                    toggle.classList.toggle('fa-eye-slash');
                });
            });

            // --- Login Form Submission ---
            const loginEmailInput = document.getElementById('login-email');
            const loginPasswordInput = document.getElementById('login-password');
            const loginSubmitBtn = loginForm.querySelector('.auth-btn');

            loginForm.addEventListener('submit', async (event) => {
                event.preventDefault(); // Prevent default form submission
                showMessage('', null); // Clear previous messages

                const email = loginEmailInput.value.trim();
                const password = loginPasswordInput.value;
                const role = loginRoleInput.value; // This is the role from the hidden input

                // --- IMPORTANT DEBUGGING LOG ---
                console.log('Sending login data to server:', { email, password, role });
                // --- END DEBUGGING LOG ---

                if (!email || !password || !role) {
                    showMessage('Please enter email, password, and select a role.', 'error');
                    return;
                }

                loginSubmitBtn.disabled = true;
                loginSubmitBtn.textContent = 'Logging in...';

                try {
                    const response = await fetch('/login', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ email, password, role })
                    });
                    const result = await response.json();

                    if (response.ok) { // Check for successful HTTP status (2xx)
                        showMessage(result.message, 'success');
                        // If login is successful, check if there's pending booking data
                        const prefillData = sessionStorage.getItem('prefillBookingData');
                        if (prefillData) {
                            // User was trying to book, now logged in, redirect to user dashboard
                            sessionStorage.removeItem('prefillBookingData'); // Clear it as it will be handled on the next page
                            setTimeout(() => {
                                window.location.href = '/user'; // Assuming /user will process this
                            }, 500);
                        } else if (result.redirect) {
                            // Regular login redirect
                            setTimeout(() => {
                                window.location.href = result.redirect;
                            }, 500);
                        } else {
                            console.warn('Login successful but no redirect URL provided by server. Closing modal.');
                            showMessage('Login successful! Welcome.', 'success');
                            authOverlay.style.display = 'none'; // Close the main auth modal
                        }
                    } else {
                        // Handle non-2xx responses (e.g., 401 Unauthorized)
                        showMessage(result.message || 'Login failed. Please check your credentials.', 'error');
                    }
                } catch (error) {
                    console.error('Login error:', error);
                    showMessage('Network error during login. Please try again.', 'error');
                } finally {
                    loginSubmitBtn.disabled = false;
                    loginSubmitBtn.textContent = 'Login';
                }
            });

            // --- Google Sign-in Callback (handled by Google Identity Services) ---
            window.handleCredentialResponse = async (response) => {
                console.log('Google Sign-In response received:', response);
                // 'response.credential' contains the ID token
                const idToken = response.credential;
                showMessage('Signing in with Google...', 'info');

                if (!idToken) {
                    console.error('Google Sign-In: ID token not found in response.', response);
                    showMessage('Google Sign-in failed: No ID token received.', 'error');
                    return;
                }
                console.log('Google Sign-In: ID Token:', idToken.substring(0, 30) + '...'); // Log part of the token

                try {
                    const res = await fetch('/api/google-login', { // New endpoint for Google login
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ idToken })
                    });
                    
                    console.log('Response from /api/google-login status:', res.status);
                    const data = await res.json();
                    console.log('Response data from /api/google-login:', data);

                    if (res.ok) { // Check for successful HTTP status (2xx)
                        // Check for the new 'needsPhoneUpdate' flag
                        if (data.needsPhoneUpdate) {
                            showMessage(data.message || "Please add your phone number to continue.", 'info');
                            document.getElementById('auth-overlay').style.display = 'none'; // Hide the main auth modal
                            phoneUpdateModal.style.display = 'flex'; // Show the new phone update modal
                        } else {
                            // Successful login without redirect (e.g., if already on home page)
                            showMessage(data.message || "Google Sign-In successful!", 'success');
                            document.getElementById('auth-overlay').style.display = 'none';
                            if (data.redirect) {
                                 setTimeout(() => {
                                    window.location.href = data.redirect;
                                }, 500);
                            }
                        }
                    } else {
                        // Failed login
                        showMessage(data.message || "Google Sign-In failed.", 'error');
                    }
                } catch (error) {
                    console.error('Error during Google sign-in (frontend fetch to backend):', error);
                    showMessage('Network error during Google Sign-in. Please try again.', 'error');
                }
            };


            // --- Signup Form Submission (Initiates OTP Send) ---
            const signupFullNameInput = document.getElementById('signup-fullname');
            const signupEmailInput = document.getElementById('signup-email');
            const signupPhoneInput = document.getElementById('signup-phone');
            const signupPasswordInput = document.getElementById('signup-password');
            const signupConfirmPasswordInput = document.getElementById('signup-confirm-password');
            const signupAadhaarInput = document.getElementById('signup-aadhaar');
            const signupPanInput = document.getElementById('signup-pan');
            const signupSkillsInput = document.getElementById('signup-skills');
            const signupSubmitBtn = signupForm.querySelector('.auth-btn');

            signupForm.addEventListener('submit', async (event) => {
                event.preventDefault();
                showMessage('', null); // Clear previous messages

                const fullName = signupFullNameInput.value.trim();
                const email = signupEmailInput.value.trim();
                const phoneNumber = signupPhoneInput.value.trim();
                const password = signupPasswordInput.value;
                const confirmPassword = signupConfirmPasswordInput.value;
                const role = signupRoleInput.value; // Get the currently selected role for signup

                // --- Frontend Validation ---
                if (!fullName || !email || !phoneNumber || !password || !confirmPassword) {
                    showMessage('Please fill in all required fields.', 'error');
                    return;
                }
                if (password !== confirmPassword) {
                    showMessage('Passwords do not match.', 'error');
                    return;
                }
                if (password.length < 8) {
                    showMessage('Password must be at least 8 characters.', 'error');
                    return;
                }
                if (!email.includes('@') || !email.includes('.')) {
                    showMessage('Please enter a valid email address.', 'error');
                    return;
                }
                if (!phoneNumber || !/^\d{10}$/.test(phoneNumber)) {
                    showMessage('Please enter a valid 10-digit phone number.', 'error');
                    return;
                }
                // End Frontend Validation

                const signupData = { fullName, email, phoneNumber, password, role };
                if (role === 'technician') {
                    signupData.aadhaar = signupAadhaarInput.value.trim();
                    signupData.pan = signupPanInput.value.trim();
                    signupData.skills = signupSkillsInput.value.trim();

                    if (!signupData.aadhaar || !signupData.pan || !signupData.skills) {
                        showMessage('Technician registration requires Aadhaar, PAN, and Skills.', 'error');
                        return;
                    }
                }

                signupSubmitBtn.disabled = true;
                signupSubmitBtn.textContent = 'Sending OTP...';

                try {
                    const otpResponse = await fetch('/send-otp', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ email: signupData.email })
                    });
                    const otpResult = await otpResponse.json();

                    if (otpResponse.ok) { // Check for successful HTTP status (2xx)
                        userEmailDisplay.textContent = signupData.email;
                        otpModal.style.display = 'flex';
                        showMessage(otpResult.message, 'success');
                        sessionStorage.setItem('pendingSignupData', JSON.stringify(signupData));
                    } else {
                        showMessage(otpResult.message || 'Failed to send OTP.', 'error');
                    }
                } catch (error) {
                    console.error('Signup (OTP Send) error:', error);
                    showMessage('Network error during OTP send. Please try again.', 'error');
                } finally {
                    signupSubmitBtn.disabled = false;
                    signupSubmitBtn.textContent = 'Sign Up';
                }
            });

            // --- OTP Input focus management (for Signup OTP) ---
            otpDigits.forEach((digitInput, index) => {
                digitInput.addEventListener('input', () => {
                    if (digitInput.value.length === 1 && index < otpDigits.length - 1) {
                        otpDigits[index + 1].focus();
                    }
                    const allFilled = Array.from(otpDigits).every(input => input.value.length === 1);
                    if (allFilled) {
                        verifyOtpBtn.click();
                    }
                });

                digitInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Backspace' && digitInput.value === '' && index > 0) {
                        otpDigits[index - 1].focus();
                    }
                });
            });

            // --- Close OTP Modal (for Signup OTP) ---
            closeOtpModalBtn.addEventListener('click', () => {
                otpModal.style.display = 'none';
                sessionStorage.removeItem('pendingSignupData');
                showMessage('', null);
                otpDigits.forEach(digit => digit.value = '');
            });

            // --- Verify OTP and Complete Registration (for Signup OTP) ---
            verifyOtpBtn.addEventListener('click', async () => {
                showMessage('', null);

                const enteredOtp = Array.from(otpDigits).map(input => input.value).join('');
                const storedSignupData = JSON.parse(sessionStorage.getItem('pendingSignupData'));

                if (!storedSignupData || !storedSignupData.email) {
                    showMessage('No pending signup data found. Please restart registration.', 'error');
                    otpModal.style.display = 'none';
                    return;
                }
                if (enteredOtp.length !== 6) {
                    showMessage('Please enter a complete 6-digit OTP.', 'error');
                    return;
                }

                verifyOtpBtn.disabled = true;
                verifyOtpBtn.textContent = 'Verifying...';
                resendOtpBtn.disabled = true;

                try {
                    const verifyResponse = await fetch('/verify-otp', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ email: storedSignupData.email, otp: enteredOtp })
                    });
                    const verifyResult = await verifyResponse.json();

                    if (!verifyResponse.ok) { // Check for successful HTTP status (2xx) for OTP verification
                        throw new Error(verifyResult.message || 'OTP verification failed.');
                    }

                    const registerResponse = await fetch('/register', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(storedSignupData)
                    });
                    const registerResult = await registerResponse.json();

                    if (!registerResponse.ok) { // Check for successful HTTP status (2xx) for registration
                        throw new Error(registerResult.message || 'Registration failed after OTP verification.');
                    }

                    otpModal.style.display = 'none';
                    showMessage('Registration successful! You can now login.', 'success');
                    // Check for prefill data after successful signup
                    const prefillData = sessionStorage.getItem('prefillBookingData');
                    if (prefillData) {
                        sessionStorage.removeItem('prefillBookingData'); // Clear it as it will be handled on the next page
                        window.location.href = '/user'; // Redirect to user dashboard
                    } else if (registerResult.redirect) {
                        window.location.href = registerResult.redirect;
                    } else {
                        // Fallback if no specific redirect and no prefill
                        authOverlay.style.display = 'none'; // Close the main auth modal
                    }


                } catch (error) {
                    console.error('OTP Verification or Registration Error:', error);
                    showMessage(error.message || 'An error occurred during verification or registration.', 'error');
                    otpModal.style.display = 'none';
                    sessionStorage.removeItem('pendingSignupData');
                } finally {
                    verifyOtpBtn.disabled = false;
                    verifyOtpBtn.textContent = 'Verify';
                    resendOtpBtn.disabled = false;
                }
            });

            // --- Resend OTP (for Signup OTP) ---
            resendOtpBtn.addEventListener('click', async (e) => {
                e.preventDefault();
                showMessage('', null);

                const storedSignupData = JSON.parse(sessionStorage.getItem('pendingSignupData'));

                if (!storedSignupData || !storedSignupData.email) {
                    showMessage('No email found to resend OTP. Please restart registration.', 'error');
                    return;
                }

                resendOtpBtn.disabled = true;
                resendOtpBtn.textContent = 'Sending...';

                try {
                    const response = await fetch('/send-otp', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ email: storedSignupData.email })
                    });
                    const result = await response.json();
                    if (response.ok) { // Check for successful HTTP status (2xx)
                        showMessage(result.message, 'success');
                    } else {
                        showMessage(result.message || 'Failed to resend OTP.', 'error');
                    }
                } catch (error) {
                    console.error('Resend OTP error:', error);
                    showMessage('Network error while resending OTP.', 'error');
                } finally {
                    resendOtpBtn.disabled = false;
                    resendOtpBtn.textContent = 'Resend';
                }
            });

            // --- Forgot Password Link Click ---
            forgotPasswordLink.addEventListener('click', (e) => {
                e.preventDefault();
                authOverlay.style.display = 'none'; // Hide main auth modal
                forgotPasswordModal.style.display = 'flex'; // Show forgot password modal
                // Reset its state
                forgotPasswordEmailForm.style.display = 'block';
                resetPasswordForm.style.display = 'none';
                forgotPasswordEmailInput.value = '';
                resetOtpDigits.forEach(input => input.value = '');
                newPasswordInput.value = '';
                confirmNewPasswordInput.value = '';
                showMessage('', null); // Clear any messages
            });

            // --- Close Forgot Password Modal ---
            closeForgotPasswordModalBtn.addEventListener('click', () => {
                forgotPasswordModal.style.display = 'none';
                sessionStorage.removeItem('pendingResetEmail'); // Clear stored email for reset
                showMessage('', null);
            });

            // --- Send Reset OTP Form Submission ---
           // index.html
// ...
            // --- Send Reset OTP Form Submission ---
            forgotPasswordEmailForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                showMessage('', null);
                const email = forgotPasswordEmailInput.value.trim();
                if (!email) {
                    showMessage('Please enter your email address.', 'error');
                    return;
                }

                sendResetOtpBtn.disabled = true;
                sendResetOtpBtn.textContent = 'Sending OTP...';

                try {
                    // Updated endpoint to '/send-otp' with type 'password_reset'
                    const response = await fetch('/send-otp', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ email, type: 'password_reset' }) // Pass type to the endpoint
                    });
                    const result = await response.json();

                    if (response.ok) { // Check for successful HTTP status (2xx)
                        sessionStorage.setItem('pendingResetEmail', email); // Store email for reset process
                        resetEmailDisplay.textContent = email;
                        forgotPasswordEmailForm.style.display = 'none'; // Hide email form
                        resetPasswordForm.style.display = 'block'; // Show reset password form
                        showMessage(result.message, 'success');
                        resetOtpDigits.forEach(input => input.value = ''); // Clear OTP inputs
                        resetOtpDigits[0].focus(); // Focus on first OTP digit
                    } else {
                        showMessage(result.message || 'Failed to send reset OTP.', 'error');
                    }
                } catch (error) {
                    console.error('Send Reset OTP Error:', error);
                    showMessage('Network error while sending reset OTP. Please try again.', 'error');
                } finally {
                    sendResetOtpBtn.disabled = false;
                    sendResetOtpBtn.textContent = 'Send Reset OTP';
                }
            });
// ...
            // --- OTP Input focus management (for Reset OTP) ---
            resetOtpDigits.forEach((digitInput, index) => {
                digitInput.addEventListener('input', () => {
                    if (digitInput.value.length === 1 && index < resetOtpDigits.length - 1) {
                        resetOtpDigits[index + 1].focus();
                    }
                    // Do not auto-submit here, let user click 'Reset Password' after entering new password
                });

                digitInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Backspace' && digitInput.value === '' && index > 0) {
                        otpDigits[index - 1].focus();
                    }
                });
            });

            // --- Resend Reset OTP ---
            resendResetOtpBtn.addEventListener('click', async (e) => {
                e.preventDefault();
                showMessage('', null);

                const email = sessionStorage.getItem('pendingResetEmail');
                if (!email) {
                    showMessage('No email found to resend OTP. Please restart forgot password process.', 'error');
                    return;
                }

                resendResetOtpBtn.disabled = true;
                resendResetOtpBtn.textContent = 'Sending...';

                try {
                    const response = await fetch('/send-otp', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ email, type: 'password_reset' }) // Use correct endpoint and type
                    });
                    const result = await response.json();
                    if (response.ok) { // Check for successful HTTP status (2xx)
                        showMessage(result.message, 'success');
                    } else {
                        showMessage(result.message || 'Failed to resend OTP.', 'error');
                    }
                } catch (error) {
                    console.error('Resend Reset OTP error:', error);
                    showMessage('Network error while resending OTP.', 'error');
                } finally {
                    resendResetOtpBtn.disabled = false;
                    resendResetOtpBtn.textContent = 'Resend';
                }
            });


            // --- Submit Reset Password Form ---
            resetPasswordForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                showMessage('', null);

                const email = sessionStorage.getItem('pendingResetEmail');
                const enteredOtp = Array.from(resetOtpDigits).map(input => input.value).join('');
                const newPassword = newPasswordInput.value;
                const confirmNewPassword = confirmNewPasswordInput.value;

                if (!email || !enteredOtp || !newPassword || !confirmNewPassword) {
                    showMessage('All fields are required.', 'error');
                    return;
                }
                if (newPassword !== confirmNewPassword) {
                    showMessage('New passwords do not match.', 'error');
                    return;
                }
                if (newPassword.length < 8) {
                    showMessage('New password must be at least 8 characters.', 'error');
                    return;
                }
                if (enteredOtp.length !== 6) {
                    showMessage('Please enter the complete 6-digit OTP.', 'error');
                    return;
                }

                submitResetPasswordBtn.disabled = true;
                submitResetPasswordBtn.textContent = 'Resetting...';

                try {
                    const response = await fetch('/reset-password', { // New endpoint for password reset
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ email, otp: enteredOtp, newPassword })
                    });
                    const result = await response.json();

                    if (response.ok) { // Check for successful HTTP status (2xx)
                        showMessage(result.message, 'success');
                        forgotPasswordModal.style.display = 'none'; // Close reset modal
                        authOverlay.style.display = 'flex'; // Show main login modal
                        loginTab.click(); // Switch to login tab
                        // Clear forms and session storage
                        forgotPasswordEmailForm.reset();
                        resetPasswordForm.reset();
                        resetOtpDigits.forEach(input => input.value = '');
                        sessionStorage.removeItem('pendingResetEmail');
                    } else {
                        showMessage(result.message || 'Failed to reset password.', 'error');
                    }
                } catch (error) {
                    console.error('Reset Password Error:', error);
                    showMessage('Network error during password reset. Please try again.', 'error');
                } finally {
                    submitResetPasswordBtn.disabled = false;
                    submitResetPasswordBtn.textContent = 'Reset Password';
                }
            });

            // --- Back to Login from Forgot Password ---
            backToLoginFromForgotPassword.addEventListener('click', (e) => {
                e.preventDefault();
                forgotPasswordModal.style.display = 'none';
                authOverlay.style.display = 'flex';
                loginTab.click(); // Ensure login tab is active
                showMessage('', null);
            });


            // --- AI Diagnosis Logic ---
            if (getDiagnosisBtn && applianceProblemInput && diagnosisResultDiv && loadingIndicator) {
                getDiagnosisBtn.addEventListener('click', async () => {
                    const problemDescription = applianceProblemInput.value.trim();
                    diagnosisResultDiv.style.display = 'none';
                    diagnosisResultDiv.textContent = '';
                    loadingIndicator.style.display = 'none';
                    showMessage('', null);

                    if (!problemDescription) {
                        showMessage('Please describe the problem with your appliance.', 'error');
                        return;
                    }

                    loadingIndicator.style.display = 'block';
                    getDiagnosisBtn.disabled = true;
                    getDiagnosisBtn.textContent = 'Diagnosing...';

                    try {
                        // Corrected API URL: Call your backend endpoint instead of the external Gemini API
                        const apiUrl = '/api/ai-diagnosis'; // This now points to your server.js endpoint

                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ problemDescription: problemDescription }) // Send problemDescription to your backend
                        });

                        const result = await response.json();
                        if (response.ok && result.diagnosis) { // Check for successful HTTP status (2xx) and 'diagnosis' property from your backend
                            diagnosisResultDiv.textContent = result.diagnosis;
                            diagnosisResultDiv.style.display = 'block';
                            showMessage('Diagnosis complete!', 'success');
                        } else {
                            diagnosisResultDiv.textContent = result.message || 'Could not get a diagnosis. Please try again or rephrase.';
                            diagnosisResultDiv.style.display = 'block';
                            showMessage(result.message || 'Failed to get AI diagnosis.', 'error');
                        }
                    } catch (error) {
                        console.error('AI Diagnosis API error:', error);
                        diagnosisResultDiv.textContent = 'An error occurred during diagnosis. Please try again later.';
                        diagnosisResultDiv.style.display = 'block';
                        showMessage('Error connecting to AI diagnosis service.', 'error');
                    } finally {
                        loadingIndicator.style.display = 'none';
                        getDiagnosisBtn.disabled = false;
                        getDiagnosisBtn.textContent = 'Get AI Diagnosis ✨';
                    }
                });
            }

            // --- Unauthenticated Booking Form Submission Logic ---
           // --- Unauthenticated Booking Form Submission Logic ---
if (unauthenticatedBookingForm) {
    unauthenticatedBookingForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        showMessage('', null);

        const applianceType = unauthApplianceType.value;

        if (!applianceType) {
            showMessage('Please select an appliance type.', 'error');
            return;
        }

        // Simulating the booking process without backend calls for this flow
        unauthBookServiceBtn.disabled = true;
        unauthBookServiceBtn.textContent = 'Processing...';

        // Check if the user is logged in (simulated check)
        const isLoggedIn = await checkIfLoggedIn();

        if (isLoggedIn) {
            // This is the ideal case where the user is already logged in.
            // In a real app, you would process the booking. For this example, we show a success message.
            showMessage('Service booked successfully! Redirecting...', 'success');
            setTimeout(() => {
                // In a real application, you would redirect to a confirmation page.
                console.log("User is logged in, but not redirected due to code changes.");
                unauthBookServiceBtn.disabled = false;
                unauthBookServiceBtn.textContent = 'Book Service';
            }, 2000);
        } else {
            // User is not logged in, so show the login modal.
            showMessage('Please log in or sign up to complete your service booking.', 'info');
            showAuthModal('login', 'user'); // This function call opens the modal.
            unauthBookServiceBtn.disabled = false;
            unauthBookServiceBtn.textContent = 'Book Service';
        }
    });
}


            // --- Scroll to Book Service button logic ---
            if (scrollToBookServiceBtn) {
                scrollToBookServiceBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    const bookingSection = document.getElementById('unauthenticated-book-service');
                    if (bookingSection) {
                        bookingSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                });
            }

            // --- Initial state: show login modal by default ---
            // This logic ensures that the auth modal is shown only if the user is not logged in
            // and there's no pending booking data requiring a redirect.
            checkIfLoggedIn().then(isLoggedIn => {
                const prefillData = sessionStorage.getItem('prefillBookingData');
                if (prefillData && isLoggedIn) {
                    sessionStorage.removeItem('prefillBookingData');
                    window.location.href = '/user';
                } else if (!isLoggedIn) {
                    // Only show auth modal if not logged in AND no immediate redirect is happening
                    showAuthModal('login', 'user'); // Show login modal if not logged in
                }
            });

            // --- Important: Render the React Location Search component after the DOM is ready ---
            // This needs to be INSIDE the DOMContentLoaded listener to ensure mountPoint exists.
            const mountPoint = document.getElementById('react-location-search-mount-point');
            const locationHiddenInput = document.getElementById('unauth-location-input');
            const locationDisplayText = document.getElementById('react-location-display-text'); // This is now hidden

            // Define the callback function to receive data from the React component
            const handleLocationSelection = ({ formattedAddress, placeId, latitude, longitude }) => {
                // Update the hidden form input with the selected address
                locationHiddenInput.value = formattedAddress; 
                // We no longer need to update locationDisplayText as it's hidden
                console.log('Location selected by React:', formattedAddress, 'Place ID:', placeId);
            };

            // Call the exported function from your bundled React code
            // Check if window.renderLocationSearchInput exists before calling
            if (window.renderLocationSearchInput && mountPoint) {
                // Check if pre-filled location exists in session storage (e.g., from a previous attempt)
                const prefillData = sessionStorage.getItem('prefillBookingData');
                let initialLocation = '';
                if (prefillData) {
                    try {
                        const parsedPrefill = JSON.parse(prefillData);
                        if (parsedPrefill.location) {
                            initialLocation = parsedPrefill.location;
                        }
                    } catch (e) {
                        console.error('Error parsing prefillBookingData from session storage:', e);
                    }
                }
                
                window.renderLocationSearchInput(mountPoint, handleLocationSelection, initialLocation);
                // Also update the hidden input with initial location if provided
                if (initialLocation) {
                    locationHiddenInput.value = initialLocation;
                }
            } else {
                console.error('window.renderLocationSearchInput or mount point not defined. React component cannot render.');
                // Fallback for user experience if React component fails to load
                if (mountPoint) {
                    // Create a simple text input as a fallback if React fails to load
                    mountPoint.innerHTML = '<input type="text" id="unauth-location-input-fallback" class="w-full p-2 border rounded" placeholder="Location search unavailable. Please enter manually." />';
                    const fallbackInput = document.getElementById('unauth-location-input-fallback');
                    fallbackInput.addEventListener('input', (e) => {
                        // Update the hidden input when the fallback input changes
                        locationHiddenInput.value = e.target.value;
                    });
                     // Copy initial location to fallback input if it exists
                    if (initialLocation) {
                        fallbackInput.value = initialLocation;
                        locationHiddenInput.value = initialLocation;
                    }
                }
            }
        });
           
        // Dummy initMap function definition, required by Google Maps API script tag's 'callback' parameter
        function initMap() {
            // This function is intentionally left empty as we are using Geocoding API via backend.
            // However, the Google Maps script URL requires it.
            console.log("initMap called (dummy function for Google Maps API loading).");
        }

        // --- Google Sign-in Callback (provided by Google Identity Services) ---
        // This function is called by the GSI library after a user signs in.
        function handleCredentialResponse(response) {
            console.log("Google Token Received:", response.credential);

            // Send the ID token to your backend for verification and session management
            fetch("/api/google-login", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({ idToken: response.credential }) // Use 'idToken' as expected by backend
            })
            .then(async res => {
                // Check if the response is a redirect (e.g., to /user, /technician)
                // If the backend sends a redirect URL, follow it.
                if (res.redirected) {
                    window.location.href = res.url;
                    return; // Stop further execution in this block
                }

                // Otherwise, parse the JSON response
                return res.json();
            })
            .then(data => {
                // This block will execute if there was no redirect and JSON data was received
                if (data) {
                    console.log("Login success/failure response:", data);
                    if (data.success) {
                        // Check for the new 'needsPhoneUpdate' flag
                        if (data.needsPhoneUpdate) {
                            showMessage(data.message || "Please add your phone number to continue.", 'info');
                            document.getElementById('auth-overlay').style.display = 'none'; // Hide the main auth modal
                            phoneUpdateModal.style.display = 'flex'; // Show the new phone update modal
                        } else {
                            // Successful login without redirect (e.g., if already on home page)
                            showMessage(data.message || "Google Sign-In successful!", 'success');
                            document.getElementById('auth-overlay').style.display = 'none';
                            if (data.redirect) {
                                 setTimeout(() => {
                                    window.location.href = data.redirect;
                                }, 500);
                            }
                        }
                    } else {
                        // Failed login
                        showMessage(data.message || "Google Sign-in failed.", 'error');
                    }
                }
            })
            .catch(err => {
                console.error("Login failed:", err);
                showMessage("Network error during Google Sign-In.", 'error');
            });
        }

        // --- FAQ Accordion Logic ---
        const faqItems = document.querySelectorAll('.faq-item');

        faqItems.forEach(item => {
            const question = item.querySelector('.faq-question');
            const answer = item.querySelector('.faq-answer');
            const icon = item.querySelector('i');

            question.addEventListener('click', () => {
                const isActive = item.classList.contains('active');

                // Close all other open FAQ items
                faqItems.forEach(otherItem => {
                    if (otherItem !== item && otherItem.classList.contains('active')) {
                        otherItem.classList.remove('active');
                        otherItem.querySelector('.faq-answer').style.maxHeight = '0';
                    }
                });

                // Toggle the clicked item's state
                if (isActive) {
                    item.classList.remove('active');
                    answer.style.maxHeight = '0';
                } else {
                    item.classList.add('active');
                    answer.style.maxHeight = answer.scrollHeight + 'px';
                }
            });
        });
        
    </script>
    
    <!-- Google Maps API script - This should only be present if you need other client-side Google Maps functionalities
         (e.g., displaying an actual map). Since our autocomplete is now backend-proxied,
         this script might not be strictly necessary for just location search, but keep it if other parts of your app use it. -->
    <!-- Make sure to replace YOUR_VITE_GOOGLE_MAPS_API_KEY with your actual key! -->
    <!-- <script async defer src="https://maps.googleapis.com/maps/api/js?key=YOUR_VITE_GOOGLE_MAPS_API_KEY&libraries=places&callback=initMap"></script> -->
</body>
</html>
